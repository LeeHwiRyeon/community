<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 추천 시스템 모니터링 대시보드</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .header p {
            color: #7f8c8d;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .stat-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-number.excellent {
            color: #27ae60;
        }

        .stat-number.good {
            color: #f39c12;
        }

        .stat-number.poor {
            color: #e74c3c;
        }

        .stat-description {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .chart-container h3 {
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .algorithms-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .algorithm-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .algorithm-card h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .algorithm-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .metric {
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
        }

        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
        }

        .metric-label {
            font-size: 0.8em;
            color: #7f8c8d;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            transition: width 0.3s ease;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .btn-warning:hover {
            background: #e67e22;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }

        .error {
            background: #e74c3c;
            color: white;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .success {
            background: #27ae60;
            color: white;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .recommendation-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid #ecf0f1;
            border-radius: 6px;
            margin-bottom: 10px;
        }

        .recommendation-item:hover {
            background: #f8f9fa;
        }

        .recommendation-content {
            flex: 1;
        }

        .recommendation-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .recommendation-meta {
            font-size: 0.9em;
            color: #7f8c8d;
        }

        .recommendation-score {
            text-align: right;
        }

        .score-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #3498db;
        }

        .score-confidence {
            font-size: 0.8em;
            color: #7f8c8d;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid #ecf0f1;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .tab.active {
            border-bottom-color: #3498db;
            color: #3498db;
            font-weight: 600;
        }

        .tab:hover {
            background: #f8f9fa;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .algorithms-container {
                grid-template-columns: 1fr;
            }

            .controls {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>🤖 AI 추천 시스템 모니터링 대시보드</h1>
            <p>머신러닝 기반 추천 시스템의 성능과 사용자 행동을 실시간으로 모니터링합니다.</p>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="refreshData()">새로고침</button>
            <button class="btn btn-success" onclick="runRecommendationTest()">추천 테스트</button>
            <button class="btn btn-warning" onclick="exportReport()">리포트 내보내기</button>
        </div>

        <div id="message"></div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>전체 정확도</h3>
                <div id="overallAccuracy" class="stat-number">-</div>
                <div class="stat-description">추천 시스템 정확도</div>
            </div>
            <div class="stat-card">
                <h3>클릭률</h3>
                <div id="clickThroughRate" class="stat-number">-</div>
                <div class="stat-description">추천 콘텐츠 클릭률</div>
            </div>
            <div class="stat-card">
                <h3>사용자 만족도</h3>
                <div id="userSatisfaction" class="stat-number">-</div>
                <div class="stat-description">사용자 평균 만족도</div>
            </div>
            <div class="stat-card">
                <h3>활성 사용자</h3>
                <div id="activeUsers" class="stat-number">-</div>
                <div class="stat-description">추천을 받는 활성 사용자</div>
            </div>
        </div>

        <div class="chart-container">
            <h3>알고리즘별 성능 비교</h3>
            <canvas id="algorithmChart" width="400" height="200"></canvas>
        </div>

        <div class="chart-container">
            <h3>추천 정확도 추이</h3>
            <canvas id="accuracyChart" width="400" height="200"></canvas>
        </div>

        <div class="algorithms-container">
            <div class="algorithm-card">
                <h4>🎯 콘텐츠 기반 추천</h4>
                <div class="algorithm-metrics">
                    <div class="metric">
                        <div class="metric-value" id="contentBasedAccuracy">-</div>
                        <div class="metric-label">정확도</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="contentBasedCoverage">-</div>
                        <div class="metric-label">커버리지</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="contentBasedProgress" style="width: 0%"></div>
                </div>
                <div style="text-align: center; font-size: 0.9em; color: #7f8c8d;">
                    사용자 관심사 기반 추천
                </div>
            </div>

            <div class="algorithm-card">
                <h4>👥 협업 필터링</h4>
                <div class="algorithm-metrics">
                    <div class="metric">
                        <div class="metric-value" id="collaborativeAccuracy">-</div>
                        <div class="metric-label">정확도</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="collaborativeCoverage">-</div>
                        <div class="metric-label">커버리지</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="collaborativeProgress" style="width: 0%"></div>
                </div>
                <div style="text-align: center; font-size: 0.9em; color: #7f8c8d;">
                    유사 사용자 기반 추천
                </div>
            </div>

            <div class="algorithm-card">
                <h4>🔥 인기도 기반</h4>
                <div class="algorithm-metrics">
                    <div class="metric">
                        <div class="metric-value" id="popularityAccuracy">-</div>
                        <div class="metric-label">정확도</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="popularityCoverage">-</div>
                        <div class="metric-label">커버리지</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="popularityProgress" style="width: 0%"></div>
                </div>
                <div style="text-align: center; font-size: 0.9em; color: #7f8c8d;">
                    인기 콘텐츠 기반 추천
                </div>
            </div>

            <div class="algorithm-card">
                <h4>⚡ 통합 추천</h4>
                <div class="algorithm-metrics">
                    <div class="metric">
                        <div class="metric-value" id="hybridAccuracy">-</div>
                        <div class="metric-label">정확도</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="hybridCoverage">-</div>
                        <div class="metric-label">커버리지</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="hybridProgress" style="width: 0%"></div>
                </div>
                <div style="text-align: center; font-size: 0.9em; color: #7f8c8d;">
                    모든 알고리즘 통합
                </div>
            </div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab(0)">실시간 추천</div>
            <div class="tab" onclick="switchTab(1)">성능 지표</div>
            <div class="tab" onclick="switchTab(2)">사용자 행동</div>
            <div class="tab" onclick="switchTab(3)">시스템 상태</div>
        </div>

        <div class="tab-content active" id="tab-0">
            <div class="chart-container">
                <h3>실시간 추천 현황</h3>
                <div id="realtimeRecommendations">
                    <div class="loading">실시간 추천 데이터를 불러오는 중...</div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="tab-1">
            <div class="chart-container">
                <h3>성능 지표</h3>
                <canvas id="performanceChart" width="400" height="200"></canvas>
            </div>
        </div>

        <div class="tab-content" id="tab-2">
            <div class="chart-container">
                <h3>사용자 행동 분석</h3>
                <canvas id="userBehaviorChart" width="400" height="200"></canvas>
            </div>
        </div>

        <div class="tab-content" id="tab-3">
            <div class="chart-container">
                <h3>시스템 상태</h3>
                <div id="systemStatus">
                    <div class="loading">시스템 상태를 확인하는 중...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let algorithmChart = null;
        let accuracyChart = null;
        let performanceChart = null;
        let userBehaviorChart = null;
        let currentTab = 0;

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', function () {
            initializeCharts();
            refreshData();
        });

        // 데이터 새로고침
        async function refreshData() {
            try {
                showMessage('데이터를 불러오는 중...', 'info');

                // 시뮬레이션 데이터
                const data = await getRecommendationData();
                updateDashboard(data);

                showMessage('데이터가 성공적으로 업데이트되었습니다.', 'success');
            } catch (error) {
                console.error('데이터 새로고침 오류:', error);
                showMessage('데이터를 불러오는 중 오류가 발생했습니다.', 'error');
            }
        }

        // 추천 데이터 가져오기
        async function getRecommendationData() {
            // 실제로는 API 호출
            return {
                overallAccuracy: 87.5,
                clickThroughRate: 23.4,
                userSatisfaction: 4.2,
                activeUsers: 1250,
                algorithms: {
                    contentBased: { accuracy: 85.2, coverage: 78.5 },
                    collaborative: { accuracy: 82.1, coverage: 65.3 },
                    popularity: { accuracy: 75.8, coverage: 92.1 },
                    hybrid: { accuracy: 89.7, coverage: 88.4 }
                },
                recommendations: [
                    { id: 'rec_1', title: 'React 고급 패턴', score: 0.92, confidence: 0.88, algorithm: 'content_based' },
                    { id: 'rec_2', title: 'Node.js 성능 최적화', score: 0.87, confidence: 0.82, algorithm: 'collaborative' },
                    { id: 'rec_3', title: 'UI/UX 디자인 트렌드', score: 0.89, confidence: 0.85, algorithm: 'popularity' },
                    { id: 'rec_4', title: '데이터베이스 설계', score: 0.84, confidence: 0.79, algorithm: 'hybrid' },
                    { id: 'rec_5', title: '모바일 앱 개발', score: 0.91, confidence: 0.87, algorithm: 'content_based' }
                ]
            };
        }

        // 대시보드 업데이트
        function updateDashboard(data) {
            // 전체 통계 업데이트
            document.getElementById('overallAccuracy').textContent = data.overallAccuracy + '%';
            document.getElementById('clickThroughRate').textContent = data.clickThroughRate + '%';
            document.getElementById('userSatisfaction').textContent = data.userSatisfaction + '/5';
            document.getElementById('activeUsers').textContent = data.activeUsers.toLocaleString();

            // 알고리즘별 성능 업데이트
            updateAlgorithmMetrics(data.algorithms);

            // 실시간 추천 업데이트
            updateRealtimeRecommendations(data.recommendations);

            // 차트 업데이트
            updateCharts(data);
        }

        // 알고리즘 메트릭 업데이트
        function updateAlgorithmMetrics(algorithms) {
            const algorithmData = {
                contentBased: algorithms.contentBased,
                collaborative: algorithms.collaborative,
                popularity: algorithms.popularity,
                hybrid: algorithms.hybrid
            };

            Object.entries(algorithmData).forEach(([key, metrics]) => {
                document.getElementById(key + 'Accuracy').textContent = metrics.accuracy + '%';
                document.getElementById(key + 'Coverage').textContent = metrics.coverage + '%';
                document.getElementById(key + 'Progress').style.width = metrics.accuracy + '%';
            });
        }

        // 실시간 추천 업데이트
        function updateRealtimeRecommendations(recommendations) {
            const container = document.getElementById('realtimeRecommendations');

            const html = recommendations.map(rec => `
                <div class="recommendation-item">
                    <div class="recommendation-content">
                        <div class="recommendation-title">${rec.title}</div>
                        <div class="recommendation-meta">
                            알고리즘: ${rec.algorithm} | 신뢰도: ${Math.round(rec.confidence * 100)}%
                        </div>
                    </div>
                    <div class="recommendation-score">
                        <div class="score-value">${Math.round(rec.score * 100)}%</div>
                        <div class="score-confidence">추천 점수</div>
                    </div>
                </div>
            `).join('');

            container.innerHTML = html;
        }

        // 차트 초기화
        function initializeCharts() {
            // 알고리즘별 성능 차트
            const algorithmCtx = document.getElementById('algorithmChart').getContext('2d');
            algorithmChart = new Chart(algorithmCtx, {
                type: 'bar',
                data: {
                    labels: ['콘텐츠 기반', '협업 필터링', '인기도 기반', '통합 추천'],
                    datasets: [{
                        label: '정확도 (%)',
                        data: [0, 0, 0, 0],
                        backgroundColor: 'rgba(52, 152, 219, 0.8)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        borderWidth: 1
                    }, {
                        label: '커버리지 (%)',
                        data: [0, 0, 0, 0],
                        backgroundColor: 'rgba(46, 204, 113, 0.8)',
                        borderColor: 'rgba(46, 204, 113, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });

            // 정확도 추이 차트
            const accuracyCtx = document.getElementById('accuracyChart').getContext('2d');
            accuracyChart = new Chart(accuracyCtx, {
                type: 'line',
                data: {
                    labels: ['1일', '2일', '3일', '4일', '5일', '6일', '7일'],
                    datasets: [{
                        label: '전체 정확도',
                        data: [82, 84, 85, 86, 87, 87.5, 87.5],
                        borderColor: 'rgba(52, 152, 219, 1)',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });

            // 성능 지표 차트
            const performanceCtx = document.getElementById('performanceChart').getContext('2d');
            performanceChart = new Chart(performanceCtx, {
                type: 'doughnut',
                data: {
                    labels: ['정확도', '커버리지', '다양성', '신선도'],
                    datasets: [{
                        data: [87.5, 78.5, 65.2, 72.8],
                        backgroundColor: ['#3498db', '#2ecc71', '#f39c12', '#e74c3c']
                    }]
                },
                options: {
                    responsive: true
                }
            });

            // 사용자 행동 차트
            const userBehaviorCtx = document.getElementById('userBehaviorChart').getContext('2d');
            userBehaviorChart = new Chart(userBehaviorCtx, {
                type: 'radar',
                data: {
                    labels: ['클릭률', '체류시간', '재방문율', '공유율', '만족도'],
                    datasets: [{
                        label: '사용자 행동',
                        data: [23.4, 45.2, 67.8, 12.3, 84.0],
                        borderColor: 'rgba(52, 152, 219, 1)',
                        backgroundColor: 'rgba(52, 152, 219, 0.2)'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        // 차트 업데이트
        function updateCharts(data) {
            // 알고리즘 차트 업데이트
            algorithmChart.data.datasets[0].data = [
                data.algorithms.contentBased.accuracy,
                data.algorithms.collaborative.accuracy,
                data.algorithms.popularity.accuracy,
                data.algorithms.hybrid.accuracy
            ];
            algorithmChart.data.datasets[1].data = [
                data.algorithms.contentBased.coverage,
                data.algorithms.collaborative.coverage,
                data.algorithms.popularity.coverage,
                data.algorithms.hybrid.coverage
            ];
            algorithmChart.update();
        }

        // 탭 전환
        function switchTab(index) {
            // 모든 탭 비활성화
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // 선택된 탭 활성화
            document.querySelectorAll('.tab')[index].classList.add('active');
            document.getElementById(`tab-${index}`).classList.add('active');

            currentTab = index;

            // 탭별 데이터 로드
            if (index === 1) {
                loadPerformanceData();
            } else if (index === 2) {
                loadUserBehaviorData();
            } else if (index === 3) {
                loadSystemStatus();
            }
        }

        // 성능 데이터 로드
        function loadPerformanceData() {
            // 성능 지표 차트는 이미 초기화됨
        }

        // 사용자 행동 데이터 로드
        function loadUserBehaviorData() {
            // 사용자 행동 차트는 이미 초기화됨
        }

        // 시스템 상태 로드
        function loadSystemStatus() {
            const container = document.getElementById('systemStatus');

            const statusData = [
                { name: '추천 엔진', status: '정상', uptime: '99.9%' },
                { name: '데이터베이스', status: '정상', uptime: '99.8%' },
                { name: '캐시 서버', status: '정상', uptime: '99.7%' },
                { name: 'API 서버', status: '정상', uptime: '99.9%' }
            ];

            const html = statusData.map(item => `
                <div class="recommendation-item">
                    <div class="recommendation-content">
                        <div class="recommendation-title">${item.name}</div>
                        <div class="recommendation-meta">가동률: ${item.uptime}</div>
                    </div>
                    <div class="recommendation-score">
                        <div class="score-value" style="color: #27ae60;">${item.status}</div>
                    </div>
                </div>
            `).join('');

            container.innerHTML = html;
        }

        // 추천 테스트 실행
        function runRecommendationTest() {
            showMessage('추천 테스트를 실행하는 중...', 'info');

            setTimeout(() => {
                showMessage('추천 테스트가 완료되었습니다. 정확도: 89.2%', 'success');
                refreshData();
            }, 2000);
        }

        // 리포트 내보내기
        function exportReport() {
            const report = {
                timestamp: new Date().toISOString(),
                overallAccuracy: document.getElementById('overallAccuracy').textContent,
                clickThroughRate: document.getElementById('clickThroughRate').textContent,
                userSatisfaction: document.getElementById('userSatisfaction').textContent,
                activeUsers: document.getElementById('activeUsers').textContent
            };

            const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `recommendation-report-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);

            showMessage('리포트가 내보내기되었습니다.', 'success');
        }

        // 메시지 표시
        function showMessage(message, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.innerHTML = `<div class="${type}">${message}</div>`;

            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 5000);
        }

        // 자동 새로고침 (5분마다)
        setInterval(refreshData, 5 * 60 * 1000);
    </script>
</body>

</html>