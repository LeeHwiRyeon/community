# RPG 베타 롤아웃 가이드

## 1. 플래그 구성 옵션
| 환경 변수 | 설명 | 기본값 |
| --- | --- | --- |
| `FEATURE_RPG_GLOBAL` | 전체 사용자에게 RPG 기능을 즉시 공개할지 여부 (`1`/`0`) | `0` |
| `FEATURE_RPG_FORCE_OFF` | 긴급 차단 스위치 (`1` 설정 시 강제 비활성화) | `0` |
| `FEATURE_RPG_BETA_USERS` | 베타 사용자 ID 목록 (`,` 또는 줄바꿈 구분) | 비어 있음 |
| `FEATURE_RPG_BETA_FILE` | 베타 사용자 ID를 정의한 외부 파일 경로 | 비어 있음 |
| `FEATURE_RPG_BETA_FEEDBACK_URL` | 베타 피드백 설문/폼 URL | 비어 있음 |
| `FEATURE_RPG_DEV_ENABLE` | 개발/모의 환경에서 자동 활성화 여부 (`1`/`0`) | `1` |

> 참고: `USE_MOCK_DB=1` 또는 `ENV_ALLOW_MOCK=1`이면 자동으로 RPG 기능이 활성화됩니다. 실서버에서는 플래그로 명확히 제어하세요.

## 2. 베타 사용자 온보딩 절차
1. **대상 선정**: 활동량이 높은 사용자 20명 내외를 선정하고 ID를 플래그에 등록
2. **접근 공지**: 선정 사용자에게 메일/DM으로 기능 소개, 기대 효과, 피드백 채널 공유
3. **기능 안내**: 새 UI 스크린샷 또는 GIF 제공 (레벨업, 배지 획득, 알림 흐름)
4. **피드백 수집**: 설문 링크(`FEATURE_RPG_BETA_FEEDBACK_URL`)와 슬랙 `#rpg-beta-support` 채널 운영
5. **지원 창구**: 24시간 이내 1차 대응 SLA 유지, 이슈는 트래킹 문서로 기록

## 3. 피드백 라운드 일정 예시
| 주차 | 목표 | 담당 |
| --- | --- | --- |
| 1주차 | 베타 사용자 온보딩 및 초기 장애 대응 | 서비스 운영팀 |
| 2주차 | 레벨/배지 밸런스 조정, 토스트 카피 검증 | 기획 + 디자인 |
| 3주차 | 통계 대시보드 검증 및 사용자 인터뷰 3건 | 데이터팀 + UX |
| 4주차 | 글로벌 플래그 전환 여부 결정 및 공지 초안 확정 | PO + 커뮤니케이션 |

## 4. QA 체크리스트
- [ ] 비베타 사용자가 프로필에 접근하면 “베타 진행 중” 메시지만 노출되는지 확인
- [ ] 베타 사용자가 레벨업/배지 획득 시 토스트 및 알림 센터가 정상 작동하는지 확인
- [ ] `/api/profile/:id/progress` 응답에 `features` 필드가 포함되고 캐시 만료 후 갱신되는지 확인
- [ ] 피드백 설문 링크가 프론트 메시지에 노출되고 정상 동작하는지 확인

## 5. 롤백 전략
- `FEATURE_RPG_GLOBAL=0` 설정 및 베타 목록 제거 → 즉시 기존 프로필 화면으로 회귀
- 긴급 상황 시 `FEATURE_RPG_FORCE_OFF=1`로 강제 차단 후 원인 분석
- 마이그레이션된 레벨/배지 데이터는 유지되므로 재활성화 시 그대로 복구 가능

## 6. 커뮤니케이션 템플릿 (예시)
```text
제목: [Community Hub] RPG 프로필 베타 초대

안녕하세요, <닉네임>님!
커뮤니티 활동 기여도에 감사드리며, 새롭게 준비 중인 RPG 프로필 베타에 초대드립니다.

- 이용 경로: https://community.local/profile/<userId>
- 피드백: <설문 링크>
- 지원 채널: Slack #rpg-beta-support

1주일 간 사용해 보시고, 레벨업/배지 시스템에 대한 의견을 공유해 주세요.
감사합니다.
```

## 7. 릴리스 준비 체크리스트
- [ ] 베타 피드백 요약 및 반영 계획 수립
- [ ] 정식 공지 초안(블로그, 배너, 이메일) 확정
- [ ] `FEATURE_RPG_GLOBAL=1` 전환 일정과 모니터링 담당자 지정
