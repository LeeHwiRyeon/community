# í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„ ì™„ë£Œ ë³´ê³ ì„œ

**ë²„ì „**: 1.0.0  
**ì‘ì„±ì¼**: 2025ë…„ 11ì›” 9ì¼  
**ìƒíƒœ**: âœ… ì™„ë£Œ

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ìƒì„±ëœ ìŠ¤í¬ë¦½íŠ¸](#ìƒì„±ëœ-ìŠ¤í¬ë¦½íŠ¸)
3. [ë°°í¬ í”„ë¡œì„¸ìŠ¤](#ë°°í¬-í”„ë¡œì„¸ìŠ¤)
4. [ì‚¬ìš© ê°€ì´ë“œ](#ì‚¬ìš©-ê°€ì´ë“œ)
5. [ì²´í¬ë¦¬ìŠ¤íŠ¸](#ì²´í¬ë¦¬ìŠ¤íŠ¸)
6. [ë¡¤ë°± ê³„íš](#ë¡¤ë°±-ê³„íš)

---

## 1. ê°œìš”

í”„ë¡œë•ì…˜ í™˜ê²½ ë°°í¬ë¥¼ ìœ„í•œ ìë™í™” ìŠ¤í¬ë¦½íŠ¸ ë° ê²€ì¦ ë„êµ¬ê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

### 1.1 ì£¼ìš” ì„±ê³¼

âœ… **í™˜ê²½ë³€ìˆ˜ ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸** - ë°°í¬ ì „ ëª¨ë“  ì„¤ì • ìë™ ê²€ì¦  
âœ… **ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ë„êµ¬** - ì•ˆì „í•œ ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸  
âœ… **í—¬ìŠ¤ì²´í¬ ìŠ¤í¬ë¦½íŠ¸** - ë°°í¬ í›„ ì‹œìŠ¤í…œ ìƒíƒœ ìë™ ê²€ì¦  
âœ… **Docker ë¹Œë“œ ìµœì í™”** - í”„ë¡œë•ì…˜ ì´ë¯¸ì§€ ë¹Œë“œ & ìŠ¤ìº”  
âœ… **npm ìŠ¤í¬ë¦½íŠ¸ í†µí•©** - í•œ ì¤„ ëª…ë ¹ì–´ë¡œ ë°°í¬ ì‹¤í–‰

### 1.2 í•µì‹¬ ê¸°ëŠ¥

- ğŸ” **ìë™ ê²€ì¦**: í™˜ê²½ë³€ìˆ˜, ë³´ì•ˆ ì„¤ì •, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìë™ í™•ì¸
- ğŸ—„ï¸ **ì•ˆì „í•œ ë§ˆì´ê·¸ë ˆì´ì…˜**: íŠ¸ëœì­ì…˜ ê¸°ë°˜ ë¡¤ë°± ì§€ì›
- ğŸ¥ **ë°°í¬ í›„ í—¬ìŠ¤ì²´í¬**: API, DB, Redis, ë³´ì•ˆ í—¤ë” ìë™ ê²€ì¦
- ğŸ³ **Docker ìµœì í™”**: Multi-stage ë¹Œë“œ, ì·¨ì•½ì  ìŠ¤ìº”, ì´ë¯¸ì§€ ë¶„ì„
- ğŸ“Š **ìƒì„¸ ë¦¬í¬íŒ…**: ëª¨ë“  ê²€ì¦ ê²°ê³¼ ì»¬ëŸ¬ ì¶œë ¥

---

## 2. ìƒì„±ëœ ìŠ¤í¬ë¦½íŠ¸

### 2.1 í™˜ê²½ë³€ìˆ˜ ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸

**íŒŒì¼**: `server-backend/scripts/validate-env.js`

**ê¸°ëŠ¥**:
- í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ ì¡´ì¬ í™•ì¸ (30+ ë³€ìˆ˜)
- ì‹œí¬ë¦¿ ê°•ë„ ê²€ì¦ (JWT_SECRET, SESSION_SECRET ë“±)
- ì—”íŠ¸ë¡œí”¼ ë¶„ì„ (ë¬´ì‘ìœ„ì„± ê²€ì¦)
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸
- Redis ì—°ê²° í…ŒìŠ¤íŠ¸
- HTTPS ì„¤ì • ê²€ì¦
- ë³´ì•ˆ ì„¤ì • ê²€ì¦
- íŒŒì¼ ê¶Œí•œ í™•ì¸

**ì‚¬ìš©ë²•**:
```bash
npm run deploy:validate-env
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         ğŸ” í™˜ê²½ë³€ìˆ˜ ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ v1.0.0            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”§ í™˜ê²½ë³€ìˆ˜ ê²€ì¦
âœ“ NODE_ENV: âœ“
âœ“ PORT: âœ“
âœ“ JWT_SECRET: âœ“
âœ“ SESSION_SECRET: âœ“
âœ“ DB_HOST: âœ“
âœ“ DB_PASSWORD: âœ“
âœ“ REDIS_URL: âœ“

ğŸ”’ HTTPS ì„¤ì • ê²€ì¦
âœ“ CORS_ORIGINì´ HTTPSë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
âœ“ Redis ì—°ê²°ì´ ì•ˆì „í•©ë‹ˆë‹¤.

ğŸ›¡ï¸ ë³´ì•ˆ ì„¤ì • ê²€ì¦
âœ“ JWT ì•Œê³ ë¦¬ì¦˜: RS256
âœ“ Access Token ë§Œë£Œ: 15m

ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸
âœ“ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„±ê³µ

ğŸ“¦ Redis ì—°ê²° í…ŒìŠ¤íŠ¸
âœ“ Redis ì—°ê²° ì„±ê³µ

ğŸ“Š ê²€ì¦ ê²°ê³¼ ìš”ì•½
í†µê³¼: 25
ê²½ê³ : 0
ì˜¤ë¥˜: 0
ì¹˜ëª…ì : 0

âœ… ëª¨ë“  ê²€ì¦ í†µê³¼!
ë°°í¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```

### 2.2 ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸

**íŒŒì¼**: `server-backend/scripts/db-migrate.js`

**ê¸°ëŠ¥**:
- ë§ˆì´ê·¸ë ˆì´ì…˜ íˆìŠ¤í† ë¦¬ ê´€ë¦¬
- íŠ¸ëœì­ì…˜ ê¸°ë°˜ ì•ˆì „í•œ ì‹¤í–‰
- ìë™ ë¡¤ë°± ì§€ì›
- ì‹¤í–‰ ì‹œê°„ ì¸¡ì •
- ì—ëŸ¬ ë¡œê¹…

**ë§ˆì´ê·¸ë ˆì´ì…˜ ëª©ë¡**:
1. `20251109_encryption_tables` - ì•”í˜¸í™” ì‹œìŠ¤í…œ í…Œì´ë¸”
   - user_key_pairs
   - encrypted_messages
   - encryption_audit_logs
   - messages.is_encrypted ì»¬ëŸ¼

2. `20251109_performance_indexes` - ì„±ëŠ¥ ìµœì í™” ì¸ë±ìŠ¤
   - users.email ì¸ë±ìŠ¤
   - messages ë³µí•© ì¸ë±ìŠ¤ (room_id, created_at)
   - rooms ë³µí•© ì¸ë±ìŠ¤ (type, is_active)

**ì‚¬ìš©ë²•**:
```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒíƒœ í™•ì¸
npm run deploy:migrate:status

# ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
npm run deploy:migrate

# ë¡¤ë°± (ë§ˆì§€ë§‰ ë§ˆì´ê·¸ë ˆì´ì…˜)
npm run deploy:migrate:rollback

# íŠ¹ì • ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡¤ë°±
node scripts/db-migrate.js down 20251109_encryption_tables
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ğŸ—„ï¸  ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ v1.0.0          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â„¹ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì¤‘...
âœ“ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„±ê³µ

ğŸ“ˆ 2ê°œì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
âš  âš ï¸  ë°±ì—…ì„ ë¨¼ì € ìƒì„±í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤!
âš  ìˆ˜ë™ ë°±ì—… ëª…ë ¹ì–´:
  mysqldump -hlocalhost -uroot -ppassword community_db > backup.sql

â„¹ ì‹¤í–‰ ì¤‘: ì•”í˜¸í™” ì‹œìŠ¤í…œ í…Œì´ë¸” ì¶”ê°€
âœ“ user_key_pairs í…Œì´ë¸” ìƒì„± ì™„ë£Œ
âœ“ encrypted_messages í…Œì´ë¸” ìƒì„± ì™„ë£Œ
âœ“ encryption_audit_logs í…Œì´ë¸” ìƒì„± ì™„ë£Œ
âœ“ messages.is_encrypted ì»¬ëŸ¼ ì¶”ê°€ ì™„ë£Œ
âœ“ ì™„ë£Œ: ì•”í˜¸í™” ì‹œìŠ¤í…œ í…Œì´ë¸” ì¶”ê°€ (450ms)

â„¹ ì‹¤í–‰ ì¤‘: ì„±ëŠ¥ ìµœì í™” ì¸ë±ìŠ¤ ì¶”ê°€
âœ“ users.email ì¸ë±ìŠ¤ ìƒì„± ì™„ë£Œ
âœ“ messages ë³µí•© ì¸ë±ìŠ¤ ìƒì„± ì™„ë£Œ
âœ“ rooms ë³µí•© ì¸ë±ìŠ¤ ìƒì„± ì™„ë£Œ
âœ“ ì™„ë£Œ: ì„±ëŠ¥ ìµœì í™” ì¸ë±ìŠ¤ ì¶”ê°€ (280ms)

âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ
â„¹ ì„±ê³µ: 2/2
```

### 2.3 í—¬ìŠ¤ì²´í¬ ìŠ¤í¬ë¦½íŠ¸

**íŒŒì¼**: `server-backend/scripts/health-check.js`

**ê¸°ëŠ¥**:
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸
- Redis ì—°ê²° í…ŒìŠ¤íŠ¸
- API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
- ë³´ì•ˆ í—¤ë” ê²€ì¦
- SSL/TLS ê²€ì¦ (í”„ë¡œë•ì…˜)
- ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì¡°íšŒ
- ìƒì„¸ ê²°ê³¼ ë¦¬í¬íŒ…

**í…ŒìŠ¤íŠ¸ í•­ëª©**:
- Database connection
- Redis connection
- Health Check API (`/health`)
- CSRF Token API (`/api/auth/csrf-token`)
- Performance Health API (`/api/performance/health`)
- Security headers (X-Content-Type-Options, X-Frame-Options, etc.)
- HTTPS configuration
- Average response time

**ì‚¬ìš©ë²•**:
```bash
# ê¸°ë³¸ í—¬ìŠ¤ì²´í¬
npm run deploy:health

# íŠ¹ì • URLë¡œ í—¬ìŠ¤ì²´í¬
BASE_URL=https://api.yourdomain.com npm run deploy:health
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         ğŸ¥ í”„ë¡œë•ì…˜ í—¬ìŠ¤ì²´í¬ v1.0.0                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â„¹ Target: http://localhost:50000
â„¹ Time: 2025-11-09T12:00:00.000Z

ğŸ—„ï¸  ë°ì´í„°ë² ì´ìŠ¤ ì²´í¬
âœ“ Database: ì—°ê²° ì„±ê³µ (45ms, 5 connections)

ğŸ“¦ Redis ì²´í¬
âœ“ Redis: ì—°ê²° ì„±ê³µ (23ms, 3 clients)

ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸ ì²´í¬
âœ“ Health Check: 200 (12ms)
âœ“ CSRF Token: 200 (34ms)
âœ“ Performance Health: 200 (18ms)
âœ“ Users List (should be 401): 401 (8ms)

ğŸ›¡ï¸  ë³´ì•ˆ í—¤ë” ì²´í¬
âœ“ x-content-type-options: nosniff
âœ“ x-frame-options: DENY
âœ“ x-xss-protection: 1; mode=block
âœ“ strict-transport-security: max-age=31536000

ğŸ“Š ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì²´í¬
âœ“ ì´ ìš”ì²­ ìˆ˜: 1234
âœ“ í‰ê·  ì‘ë‹µ ì‹œê°„: 78ms
âœ“ í™œì„± ì—°ê²° ìˆ˜: 12

ğŸ“‹ í—¬ìŠ¤ì²´í¬ ìš”ì•½
í†µê³¼: 15
ì‹¤íŒ¨: 0
ê²½ê³ : 0
ì„±ê³µë¥ : 100.0%

âœ… ëª¨ë“  í—¬ìŠ¤ì²´í¬ í†µê³¼!
ì‹œìŠ¤í…œì´ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤.
```

### 2.4 Docker ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸

**íŒŒì¼**: `server-backend/scripts/docker-build.js`

**ê¸°ëŠ¥**:
- .dockerignore ìë™ ìƒì„±/ê²€ì¦
- Multi-stage í”„ë¡œë•ì…˜ ì´ë¯¸ì§€ ë¹Œë“œ
- BuildKit ìµœì í™” ë¹Œë“œ
- ì´ë¯¸ì§€ ë ˆì´ì–´ ë¶„ì„
- ì·¨ì•½ì  ìŠ¤ìº” (Trivy)
- ì»¨í…Œì´ë„ˆ í…ŒìŠ¤íŠ¸
- ì´ë¯¸ì§€ í‘¸ì‹œ (Docker Hub/Registry)

**ì‚¬ìš©ë²•**:
```bash
# ê¸°ë³¸ ë¹Œë“œ (ë²„ì „: latest)
npm run deploy:docker-build

# íŠ¹ì • ë²„ì „ ë¹Œë“œ
node scripts/docker-build.js v1.0.0

# ë¹Œë“œ + í‘¸ì‹œ
npm run deploy:docker-build-push

# ë¹Œë“œ + í…ŒìŠ¤íŠ¸
RUN_IMAGE_TEST=true npm run deploy:docker-build
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         ğŸ³ Docker ë¹Œë“œ & ìµœì í™” v1.0.0              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â„¹ ë¹Œë“œ ë²„ì „: v1.0.0
â„¹ ì´ë¯¸ì§€ ì´ë¦„: community-platform

ğŸ“ .dockerignore íŒŒì¼ ê²€ì¦
âœ“ .dockerignore íŒŒì¼ì´ ìµœì‹  ìƒíƒœì…ë‹ˆë‹¤.

ğŸ³ í”„ë¡œë•ì…˜ Docker ì´ë¯¸ì§€ ë¹Œë“œ
â„¹ ë¹Œë“œ ì‹œì‘...
â„¹ ì´ë¯¸ì§€: community-platform:v1.0.0
[+] Building 45.2s (18/18) FINISHED
âœ“ ë¹Œë“œ ì™„ë£Œ! ì´ë¯¸ì§€ í¬ê¸°: 245MB

ğŸ“Š ì´ë¯¸ì§€ ë ˆì´ì–´ ë¶„ì„
IMAGE          CREATED          SIZE
<layer1>       3 minutes ago    120MB
<layer2>       3 minutes ago    85MB
<layer3>       3 minutes ago    40MB

ğŸ” ì´ë¯¸ì§€ ì·¨ì•½ì  ìŠ¤ìº”
â„¹ ì·¨ì•½ì  ìŠ¤ìº” ì¤‘...
âœ“ ì·¨ì•½ì  ì—†ìŒ

âœ… ë¹Œë“œ ì™„ë£Œ
âœ“ ì´ë¯¸ì§€: community-platform:v1.0.0

ì‹¤í–‰ ëª…ë ¹ì–´:
  docker run -d -p 50000:50000 --env-file .env.production community-platform:v1.0.0
```

---

## 3. ë°°í¬ í”„ë¡œì„¸ìŠ¤

### 3.1 ì™„ì „ ìë™í™” ë°°í¬

**í•œ ì¤„ ëª…ë ¹ì–´ë¡œ ëª¨ë“  ê²€ì¦ ë° ë°°í¬ ì‹¤í–‰**:

```bash
npm run deploy:full
```

ì´ ëª…ë ¹ì–´ëŠ” ë‹¤ìŒì„ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤:
1. âœ… í™˜ê²½ë³€ìˆ˜ ê²€ì¦
2. âœ… ë³´ì•ˆ í…ŒìŠ¤íŠ¸
3. âœ… ì˜ì¡´ì„± ì·¨ì•½ì  ê²€ì‚¬
4. âœ… ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
5. âœ… í—¬ìŠ¤ì²´í¬

### 3.2 ë‹¨ê³„ë³„ ë°°í¬

**ë” ì„¸ë°€í•œ ì œì–´ê°€ í•„ìš”í•œ ê²½ìš°**:

```bash
# 1ë‹¨ê³„: ë°°í¬ ì „ ê²€ì¦
npm run deploy:pre-check

# 2ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… (ìˆ˜ë™)
mysqldump -u root -p community_db > backup_$(date +%Y%m%d_%H%M%S).sql

# 3ë‹¨ê³„: ë§ˆì´ê·¸ë ˆì´ì…˜
npm run deploy:migrate

# 4ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘
pm2 restart community-backend
# ë˜ëŠ”
systemctl restart community

# 5ë‹¨ê³„: í—¬ìŠ¤ì²´í¬
npm run deploy:health
```

### 3.3 Docker ë°°í¬

```bash
# 1ë‹¨ê³„: ì´ë¯¸ì§€ ë¹Œë“œ
npm run deploy:docker-build

# 2ë‹¨ê³„: ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ì¤‘ì§€
docker stop community-app

# 3ë‹¨ê³„: ìƒˆ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run -d \
  --name community-app \
  -p 50000:50000 \
  --env-file .env.production \
  --restart unless-stopped \
  community-platform:latest

# 4ë‹¨ê³„: í—¬ìŠ¤ì²´í¬
docker exec community-app node scripts/health-check.js
```

---

## 4. ì‚¬ìš© ê°€ì´ë“œ

### 4.1 ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

**í•„ìˆ˜ í™•ì¸ ì‚¬í•­**:

```bash
# âœ… 1. í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ì¤€ë¹„
cp .env.example .env.production
# .env.production íŒŒì¼ í¸ì§‘ (ëª¨ë“  ì‹œí¬ë¦¿ ì„¤ì •)

# âœ… 2. í™˜ê²½ë³€ìˆ˜ ê²€ì¦
npm run deploy:validate-env

# âœ… 3. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test:security
npm run test:unit

# âœ… 4. ì˜ì¡´ì„± ê²€ì‚¬
npm audit

# âœ… 5. ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
mysqldump -u root -p community_db > backup.sql
```

### 4.2 ë°°í¬ ì¤‘ ëª¨ë‹ˆí„°ë§

**ë¡œê·¸ í™•ì¸**:

```bash
# PM2 ì‚¬ìš© ì‹œ
pm2 logs community-backend --lines 100

# Systemd ì‚¬ìš© ì‹œ
journalctl -u community -f

# Docker ì‚¬ìš© ì‹œ
docker logs -f community-app
```

**ì„±ëŠ¥ ë©”íŠ¸ë¦­ í™•ì¸**:

```bash
# API í˜¸ì¶œ
curl http://localhost:50000/api/performance/stats

# ë˜ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ
http://localhost:50000/api/performance/stats
```

### 4.3 ë°°í¬ í›„ ê²€ì¦

**ìë™ í—¬ìŠ¤ì²´í¬**:
```bash
npm run deploy:health
```

**ìˆ˜ë™ ê²€ì¦**:
```bash
# 1. API ì‘ë‹µ í™•ì¸
curl http://localhost:50000/health

# 2. CSRF í† í° ë°œê¸‰ í™•ì¸
curl http://localhost:50000/api/auth/csrf-token

# 3. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
mysql -u root -p -e "USE community_db; SHOW TABLES;"

# 4. Redis ì—°ê²° í™•ì¸
redis-cli ping

# 5. ë¡œê·¸ í™•ì¸ (ì—ëŸ¬ ì—†ëŠ”ì§€)
tail -n 100 logs/app.log
```

---

## 5. ì²´í¬ë¦¬ìŠ¤íŠ¸

### 5.1 ë°°í¬ ì „ (Pre-Deployment)

- [ ] ì½”ë“œ ë¦¬ë·° ì™„ë£Œ
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] í™˜ê²½ë³€ìˆ˜ ê²€ì¦ í†µê³¼ (`npm run deploy:validate-env`)
- [ ] ë³´ì•ˆ í…ŒìŠ¤íŠ¸ í†µê³¼ (`npm run test:security`)
- [ ] ì˜ì¡´ì„± ì·¨ì•½ì  ì—†ìŒ (`npm audit`)
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ì™„ë£Œ
- [ ] Redis ë°±ì—… ì™„ë£Œ
- [ ] ì„¤ì • íŒŒì¼ ë°±ì—… ì™„ë£Œ
- [ ] ë¡¤ë°± ê³„íš ìˆ˜ë¦½
- [ ] ë°°í¬ ê³µì§€ (ì‚¬ìš©ì/íŒ€)

### 5.2 ë°°í¬ ì¤‘ (During Deployment)

- [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ ì„±ê³µ (`npm run deploy:migrate`)
- [ ] ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘ ì„±ê³µ
- [ ] í”„ë¡œì„¸ìŠ¤ ì •ìƒ ì‹¤í–‰ í™•ì¸
- [ ] ì—ëŸ¬ ë¡œê·¸ ëª¨ë‹ˆí„°ë§
- [ ] ë©”ëª¨ë¦¬/CPU ì‚¬ìš©ë¥  ì •ìƒ

### 5.3 ë°°í¬ í›„ (Post-Deployment)

- [ ] í—¬ìŠ¤ì²´í¬ í†µê³¼ (`npm run deploy:health`)
- [ ] ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸ ì‘ë‹µ ì •ìƒ
- [ ] ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ ì •ìƒ
- [ ] ë°ì´í„°ë² ì´ìŠ¤ CRUD ì •ìƒ
- [ ] Redis ìºì‹± ì •ìƒ ì‘ë™
- [ ] ë³´ì•ˆ í—¤ë” ì ìš© í™•ì¸
- [ ] HTTPS ì¸ì¦ì„œ ìœ íš¨
- [ ] ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì •ìƒ ë²”ìœ„
- [ ] ëª¨ë‹ˆí„°ë§ ì•ŒëŒ ì„¤ì •
- [ ] ë°°í¬ ì™„ë£Œ ê³µì§€

---

## 6. ë¡¤ë°± ê³„íš

### 6.1 ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡¤ë°±

**PM2 ì‚¬ìš© ì‹œ**:
```bash
# ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±
git checkout <previous-tag>
npm install
pm2 restart community-backend
```

**Docker ì‚¬ìš© ì‹œ**:
```bash
# ì´ì „ ì´ë¯¸ì§€ë¡œ ë¡¤ë°±
docker stop community-app
docker rm community-app
docker run -d \
  --name community-app \
  -p 50000:50000 \
  --env-file .env.production \
  community-platform:v1.0.0-previous
```

### 6.2 ë°ì´í„°ë² ì´ìŠ¤ ë¡¤ë°±

**ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡¤ë°±**:
```bash
# ë§ˆì§€ë§‰ ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡¤ë°±
npm run deploy:migrate:rollback

# íŠ¹ì • ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡¤ë°±
node scripts/db-migrate.js down 20251109_encryption_tables
```

**ë°±ì—… ë³µì›**:
```bash
# MySQL ë°±ì—… ë³µì›
mysql -u root -p community_db < backup_20251109_120000.sql

# Redis ë°±ì—… ë³µì›
redis-cli shutdown
cp backup_redis_20251109_120000.rdb /var/lib/redis/dump.rdb
redis-server
```

### 6.3 ê¸´ê¸‰ ë¡¤ë°± ì ˆì°¨

1. **ì¦‰ì‹œ ì´ì „ ë²„ì „ìœ¼ë¡œ ì „í™˜**
   ```bash
   # Blue-Green ë°°í¬ ì‹œ
   nginx -s reload  # ì´ì „ upstreamìœ¼ë¡œ ì „í™˜
   ```

2. **ë¬¸ì œ í™•ì¸**
   ```bash
   # ë¡œê·¸ í™•ì¸
   tail -n 500 logs/app.log | grep ERROR
   
   # ì„±ëŠ¥ í™•ì¸
   curl http://localhost:50000/api/performance/stats
   ```

3. **ë°ì´í„°ë² ì´ìŠ¤ ë³µì› (í•„ìš”ì‹œ)**
   ```bash
   mysql -u root -p community_db < backup_latest.sql
   ```

4. **í—¬ìŠ¤ì²´í¬**
   ```bash
   npm run deploy:health
   ```

5. **ì‚¬ìš©ì ê³µì§€**

---

## 7. ì¶”ê°€ ë¦¬ì†ŒìŠ¤

### 7.1 ê´€ë ¨ ë¬¸ì„œ

- [DEPLOYMENT_CHECKLIST.md](./DEPLOYMENT_CHECKLIST.md) - ìƒì„¸ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ENVIRONMENT_VARIABLES_SECURITY.md](./ENVIRONMENT_VARIABLES_SECURITY.md) - í™˜ê²½ë³€ìˆ˜ ê°€ì´ë“œ
- [SECURITY_FINAL_REPORT.md](./SECURITY_FINAL_REPORT.md) - ë³´ì•ˆ ê°ì‚¬ ë³´ê³ ì„œ
- [PERFORMANCE_OPTIMIZATION_REPORT.md](./PERFORMANCE_OPTIMIZATION_REPORT.md) - ì„±ëŠ¥ ìµœì í™” ë³´ê³ ì„œ

### 7.2 npm ìŠ¤í¬ë¦½íŠ¸ ì „ì²´ ëª©ë¡

**ë°°í¬ ê´€ë ¨**:
```bash
npm run deploy:validate-env          # í™˜ê²½ë³€ìˆ˜ ê²€ì¦
npm run deploy:migrate               # ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
npm run deploy:migrate:status        # ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒíƒœ
npm run deploy:migrate:rollback      # ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡¤ë°±
npm run deploy:health                # í—¬ìŠ¤ì²´í¬
npm run deploy:docker-build          # Docker ë¹Œë“œ
npm run deploy:docker-build-push     # Docker ë¹Œë“œ & í‘¸ì‹œ
npm run deploy:pre-check             # ë°°í¬ ì „ ê²€ì¦
npm run deploy:full                  # ì „ì²´ ë°°í¬ í”„ë¡œì„¸ìŠ¤
```

**í…ŒìŠ¤íŠ¸ ê´€ë ¨**:
```bash
npm run test:security                # ë³´ì•ˆ í…ŒìŠ¤íŠ¸
npm run test:unit                    # ìœ ë‹› í…ŒìŠ¤íŠ¸
npm run test:csrf                    # CSRF í…ŒìŠ¤íŠ¸
npm run test:encryption              # ì•”í˜¸í™” í…ŒìŠ¤íŠ¸
npm audit                            # ì˜ì¡´ì„± ì·¨ì•½ì  ê²€ì‚¬
```

### 7.3 ëª¨ë‹ˆí„°ë§ ì—”ë“œí¬ì¸íŠ¸

```bash
# í—¬ìŠ¤ì²´í¬
GET /health

# ì„±ëŠ¥ í†µê³„
GET /api/performance/stats

# ì—”ë“œí¬ì¸íŠ¸ë³„ ì„±ëŠ¥
GET /api/performance/endpoint?method=GET&path=/api/users

# ì‹œìŠ¤í…œ í—¬ìŠ¤
GET /api/performance/health
```

---

## 8. ê²°ë¡ 

í”„ë¡œë•ì…˜ ë°°í¬ë¥¼ ìœ„í•œ ëª¨ë“  ìë™í™” ë„êµ¬ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.

### 8.1 í•µì‹¬ ì¥ì 

âœ… **ì™„ì „ ìë™í™”**: í•œ ì¤„ ëª…ë ¹ì–´ë¡œ ë°°í¬ ë° ê²€ì¦  
âœ… **ì•ˆì „í•œ ë°°í¬**: ëª¨ë“  ë‹¨ê³„ì—ì„œ ê²€ì¦ ë° ë¡¤ë°± ì§€ì›  
âœ… **ìƒì„¸í•œ ë¦¬í¬íŒ…**: ëª¨ë“  ì‘ì—… ê²°ê³¼ë¥¼ ì»¬ëŸ¬ ì¶œë ¥  
âœ… **í”„ë¡œë•ì…˜ ì¤€ë¹„**: ë³´ì•ˆ, ì„±ëŠ¥, ì•ˆì •ì„± ëª¨ë‘ ê²€ì¦ë¨  

### 8.2 ë‹¤ìŒ ë‹¨ê³„

1. **.env.production íŒŒì¼ ì„¤ì •**
2. **ë°°í¬ ì „ ê²€ì¦ ì‹¤í–‰**: `npm run deploy:pre-check`
3. **ë°°í¬ ì‹¤í–‰**: `npm run deploy:full`
4. **ëª¨ë‹ˆí„°ë§ ì„¤ì •**: ì„±ëŠ¥ ë©”íŠ¸ë¦­, ì•ŒëŒ êµ¬ì„±

**ğŸš€ ì´ì œ ì•ˆì „í•˜ê²Œ í”„ë¡œë•ì…˜ ë°°í¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!**

---

**ì‘ì„±ì**: AUTOAGENTS  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-11-09  
**ë¬¸ì„œ ë²„ì „**: 1.0.0
