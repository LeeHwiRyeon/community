# Phase 3 Task #2 ì™„ë£Œ ë³´ê³ ì„œ - ê³ ê¸‰ ê²€ìƒ‰ ì‹œìŠ¤í…œ

**ì‘ì„±ì¼**: 2025ë…„ 11ì›” 9ì¼  
**ì‘ì—… ê¸°ê°„**: 1ì¼  
**ìƒíƒœ**: âœ… 100% ì™„ë£Œ  
**ë‹´ë‹¹**: Full-Stack Development Team

---

## ğŸ“‹ ì‘ì—… ê°œìš”

Elasticsearch ê¸°ë°˜ì˜ ê³ ê¸‰ ê²€ìƒ‰ ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ì—¬ ì‚¬ìš©ìê°€ ê²Œì‹œë¬¼ê³¼ ì‚¬ìš©ìë¥¼ ë¹ ë¥´ê³  ì •í™•í•˜ê²Œ ê²€ìƒ‰í•  ìˆ˜ ìˆë„ë¡ ê°œì„ í–ˆìŠµë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥
- âœ… ì „ë¬¸ ê²€ìƒ‰ (Full-Text Search)
- âœ… ì‹¤ì‹œê°„ ìë™ì™„ì„± (300ms debounce)
- âœ… ê³ ê¸‰ í•„í„°ë§ (ì¹´í…Œê³ ë¦¬, íƒœê·¸, ë‚ ì§œ, ì‘ì„±ì)
- âœ… ë‹¤ì–‘í•œ ì •ë ¬ ì˜µì…˜ (ê´€ë ¨ì„±, ìµœì‹ ìˆœ, ì¡°íšŒìˆ˜, ì¢‹ì•„ìš”)
- âœ… ê²€ìƒ‰ ê²°ê³¼ í•˜ì´ë¼ì´íŠ¸
- âœ… ì¸ê¸° ê²€ìƒ‰ì–´ í‘œì‹œ
- âœ… í˜ì´ì§€ë„¤ì´ì…˜ (ìµœëŒ€ 10,000ê°œ ê²°ê³¼)

---

## ğŸ¯ êµ¬í˜„ ë‚´ìš©

### 1. Elasticsearch ì„¤ì¹˜ ë° ì„¤ì •

**íŒŒì¼**: `docker-compose.yml`

```yaml
elasticsearch:
  image: docker.elastic.co/elasticsearch/elasticsearch:8.11.0
  environment:
    - discovery.type=single-node
    - xpack.security.enabled=false
    - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
  ports:
    - "9200:9200"
  volumes:
    - es_data:/usr/share/elasticsearch/data
  healthcheck:
    test: ["CMD-SHELL", "curl -f http://localhost:9200/_cluster/health"]
    interval: 30s
    timeout: 10s
    retries: 5
```

**íŠ¹ì§•**:
- ë‹¨ì¼ ë…¸ë“œ ëª¨ë“œ (ê°œë°œ/ì†Œê·œëª¨ í™˜ê²½)
- ë³´ì•ˆ ë¹„í™œì„±í™” (ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ ì „ìš©)
- 512MB-1GB ë©”ëª¨ë¦¬ í• ë‹¹
- Health check ë° ìë™ ì¬ì‹œì‘
- ì˜êµ¬ ë³¼ë¥¨ ë§ˆìš´íŠ¸

---

### 2. ê²€ìƒ‰ ì„œë¹„ìŠ¤ êµ¬í˜„

**íŒŒì¼**: `server-backend/src/services/search-service.js` (600+ lines)

#### í•µì‹¬ ê¸°ëŠ¥

**ì¸ë±ìŠ¤ ì´ˆê¸°í™”**:
```javascript
- ê²Œì‹œë¬¼ ì¸ë±ìŠ¤ (community_posts)
  * title: text (í•œê¸€ ë¶„ì„ê¸° ì ìš©)
  * content: text
  * category: keyword
  * tags: keyword[]
  * author_name: text
  * view_count, like_count, comment_count: integer
  * created_at, updated_at: date

- ì‚¬ìš©ì ì¸ë±ìŠ¤ (community_users)
  * username: text
  * email: keyword
  * bio: text
  * created_at: date
```

**ê²€ìƒ‰ ë©”ì„œë“œ**:
- `searchPosts()` - ê²Œì‹œë¬¼ ì „ë¬¸ ê²€ìƒ‰ (ë©€í‹° í•„í„° ì§€ì›)
- `searchUsers()` - ì‚¬ìš©ì ê²€ìƒ‰
- `autocomplete()` - ìë™ì™„ì„± ê²€ìƒ‰ (prefix matching)
- `getPopularSearchTerms()` - ì¸ê¸° íƒœê·¸ ì§‘ê³„
- `indexPost()` - ë‹¨ì¼ ê²Œì‹œë¬¼ ì¸ë±ì‹±
- `deletePost()` - ê²Œì‹œë¬¼ ì¸ë±ìŠ¤ ì‚­ì œ
- `bulkIndexPosts()` - ëŒ€ëŸ‰ ì¸ë±ì‹± (1000ê°œ ë‹¨ìœ„)
- `reindex()` - ì „ì²´ ì¸ë±ìŠ¤ ì¬êµ¬ì„±

**ê²€ìƒ‰ ì¿¼ë¦¬ ì˜ˆì‹œ**:
```javascript
{
  query: {
    bool: {
      must: [
        {
          multi_match: {
            query: "ê²€ìƒ‰ì–´",
            fields: ["title^3", "content", "author_name"],
            fuzziness: "AUTO"
          }
        }
      ],
      filter: [
        { term: { category: "ììœ ê²Œì‹œíŒ" } },
        { terms: { tags: ["JavaScript", "React"] } },
        { range: { created_at: { gte: "2024-01-01" } } }
      ]
    }
  },
  sort: ["_score", { created_at: "desc" }],
  highlight: {
    fields: { title: {}, content: {} }
  }
}
```

---

### 3. ê²€ìƒ‰ API ì—”ë“œí¬ì¸íŠ¸

**íŒŒì¼**: `server-backend/src/routes/search.js` (250+ lines)

#### API ëª©ë¡

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸                   | ì„¤ëª…          | ì¸ì¦   |
| ------ | ---------------------------- | ------------- | ------ |
| POST   | `/api/search/posts`          | ê²Œì‹œë¬¼ ê²€ìƒ‰   | ì„ íƒ   |
| GET    | `/api/search/users`          | ì‚¬ìš©ì ê²€ìƒ‰   | ì„ íƒ   |
| GET    | `/api/search/autocomplete`   | ìë™ì™„ì„±      | ì„ íƒ   |
| GET    | `/api/search/popular`        | ì¸ê¸° ê²€ìƒ‰ì–´   | ì„ íƒ   |
| POST   | `/api/search/index/post/:id` | ê²Œì‹œë¬¼ ì¸ë±ì‹± | ë‚´ë¶€   |
| DELETE | `/api/search/index/post/:id` | ì¸ë±ìŠ¤ ì‚­ì œ   | ë‚´ë¶€   |
| POST   | `/api/search/bulk-index`     | ëŒ€ëŸ‰ ì¸ë±ì‹±   | ê´€ë¦¬ì |
| POST   | `/api/search/reindex`        | ì¸ë±ìŠ¤ ì¬êµ¬ì„± | ê´€ë¦¬ì |

**ê²Œì‹œë¬¼ ê²€ìƒ‰ ìš”ì²­ ì˜ˆì‹œ**:
```json
{
  "query": "React Hooks",
  "category": "ì§ˆë¬¸ê²Œì‹œíŒ",
  "tags": ["React", "JavaScript"],
  "author": "user123",
  "dateFrom": "2024-01-01",
  "dateTo": "2024-12-31",
  "sortBy": "relevance",
  "page": 1,
  "limit": 20
}
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "success": true,
  "data": {
    "total": 156,
    "posts": [
      {
        "id": 1,
        "title": "React Hooks ì‚¬ìš©ë²•",
        "content": "useStateì™€ useEffectë¥¼...",
        "category": "ì§ˆë¬¸ê²Œì‹œíŒ",
        "tags": ["React", "JavaScript"],
        "author_name": "ê°œë°œì",
        "view_count": 245,
        "like_count": 12,
        "comment_count": 8,
        "created_at": "2024-06-15T10:30:00Z",
        "score": 8.5,
        "highlights": {
          "title": ["<mark>React Hooks</mark> ì‚¬ìš©ë²•"],
          "content": ["<mark>useState</mark>ì™€ useEffectë¥¼..."]
        }
      }
    ],
    "page": 1,
    "totalPages": 8
  }
}
```

---

### 4. ê²€ìƒ‰ UI ì»´í¬ë„ŒíŠ¸

#### SearchBar.tsx (280 lines)

**ê¸°ëŠ¥**:
- ì‹¤ì‹œê°„ ìë™ì™„ì„± (300ms debounce)
- ì¸ê¸° ê²€ìƒ‰ì–´ í‘œì‹œ (ìƒìœ„ 5ê°œ)
- ê²€ìƒ‰ì–´ í´ë¦¬ì–´ ë²„íŠ¼
- ë¡œë”© ì¸ë””ì¼€ì´í„°
- í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ (Enter, Escape)

**í•µì‹¬ ì½”ë“œ**:
```typescript
// ìë™ì™„ì„± ë””ë°”ìš´ìŠ¤
useEffect(() => {
  const timer = setTimeout(() => {
    if (query.trim().length > 0) {
      fetchAutocomplete(query);
    }
  }, 300);
  return () => clearTimeout(timer);
}, [query]);

// ìë™ì™„ì„± API í˜¸ì¶œ
const fetchAutocomplete = async (q: string) => {
  const response = await apiClient.get('/api/search/autocomplete', {
    params: { q, limit: 5 }
  });
  setSuggestions(response.data.data);
};
```

#### SearchResults.tsx (250 lines)

**ê¸°ëŠ¥**:
- ê²€ìƒ‰ ê²°ê³¼ ì¹´ë“œ UI
- í•˜ì´ë¼ì´íŠ¸ í‘œì‹œ (ì œëª©, ë‚´ìš©)
- í†µê³„ ì •ë³´ (ì¡°íšŒìˆ˜, ì¢‹ì•„ìš”, ëŒ“ê¸€)
- ìƒëŒ€ ì‹œê°„ í‘œì‹œ ("3ì¼ ì „")
- í˜ì´ì§€ë„¤ì´ì…˜ (10í˜ì´ì§€ ë‹¨ìœ„)

**UI êµ¬ì„±**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì´ 156ê°œì˜ ê²€ìƒ‰ ê²°ê³¼                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ì œëª©] React Hooks ì‚¬ìš©ë²•      [ì¹´í…Œê³ ë¦¬] â”‚
â”‚ useStateì™€ useEffectë¥¼...           â”‚
â”‚ #React #JavaScript                  â”‚
â”‚ ê°œë°œì Â· 3ì¼ ì „ | ğŸ‘ 245 â­ 12 ğŸ’¬ 8 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ì´ì „] [1] [2] [3] ... [8] [ë‹¤ìŒ]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### SearchFilters.tsx (250 lines)

**ê¸°ëŠ¥**:
- ì •ë ¬ ì˜µì…˜ (ê´€ë ¨ì„±, ìµœì‹ ìˆœ, ì¡°íšŒìˆ˜, ì¢‹ì•„ìš”)
- ì¹´í…Œê³ ë¦¬ ì„ íƒ
- ì¸ê¸° íƒœê·¸ ì²´í¬ë°•ìŠ¤ (ìƒìœ„ 6ê°œ)
- ì‘ì„±ì í•„í„°
- ë‚ ì§œ ë²”ìœ„ ì„ íƒ
- ë¹ ë¥¸ ë‚ ì§œ ì„ íƒ (1ì£¼ì¼, 1ê°œì›”, 1ë…„)
- í•„í„° ì´ˆê¸°í™”

**UI êµ¬ì„±**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í•„í„° (3ê°œ ì ìš©) [ì´ˆê¸°í™”] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì •ë ¬ ê¸°ì¤€            â”‚
â”‚ [ê´€ë ¨ì„± â–¼]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì¹´í…Œê³ ë¦¬             â”‚
â”‚ [ì „ì²´ â–¼]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì¸ê¸° íƒœê·¸            â”‚
â”‚ â˜‘ JavaScript        â”‚
â”‚ â˜ React             â”‚
â”‚ â˜ TypeScript        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ê³ ê¸‰ í•„í„° â–¼]        â”‚
â”‚ ì‘ì„±ì: [_______]    â”‚
â”‚ ì‘ì„±ì¼: [___] ~ [___] â”‚
â”‚ [1ì£¼ì¼][1ê°œì›”][1ë…„]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### SearchPage.tsx (150 lines)

**ê¸°ëŠ¥**:
- SearchBar, SearchFilters, SearchResults í†µí•©
- URL íŒŒë¼ë¯¸í„° ì—°ë™ (ë¶ë§ˆí¬ ê°€ëŠ¥)
- í˜ì´ì§€ ìƒíƒœ ê´€ë¦¬
- ì—ëŸ¬ ì²˜ë¦¬
- ë¡œë”© ìƒíƒœ

---

### 5. ê²€ìƒ‰ ì¸ë±ì‹± ìë™í™”

#### ëŒ€ëŸ‰ ì¸ë±ì‹± ìŠ¤í¬ë¦½íŠ¸

**íŒŒì¼**: `server-backend/scripts/index-all-posts.js` (110 lines)

**ê¸°ëŠ¥**:
- MySQL â†’ Elasticsearch ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
- 1000ê°œ ë‹¨ìœ„ ë°°ì¹˜ ì¸ë±ì‹±
- ì§„í–‰ë¥  í‘œì‹œ
- í†µê³„ ì¶œë ¥

**ì‹¤í–‰ ë°©ë²•**:
```bash
cd server-backend
node scripts/index-all-posts.js
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
ğŸš€ ê²Œì‹œë¬¼ ì¸ë±ì‹± ì‹œì‘...
âœ… Elasticsearch ì—°ê²° ì„±ê³µ
âœ… MySQL ì—°ê²° ì„±ê³µ
ğŸ“Š ì´ 2,547ê°œì˜ ê²Œì‹œë¬¼ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.
â³ ì§„í–‰: 1000/2547 (39%)
â³ ì§„í–‰: 2000/2547 (79%)
â³ ì§„í–‰: 2547/2547 (100%)
âœ… ëª¨ë“  ê²Œì‹œë¬¼ ì¸ë±ì‹± ì™„ë£Œ!

ğŸ“ˆ ì¸ë±ì‹± í†µê³„:
  - ì´ ê²Œì‹œë¬¼ ìˆ˜: 2,547
  - ì¸ë±ì‹± ì™„ë£Œ: 2,547
  - ë°°ì¹˜ í¬ê¸°: 1000
  - ë°°ì¹˜ ìˆ˜: 3
```

#### ì‹¤ì‹œê°„ ì¸ë±ì‹± í†µí•©

ê²Œì‹œë¬¼ ìƒì„±/ìˆ˜ì •/ì‚­ì œ ì‹œ ìë™ìœ¼ë¡œ Elasticsearch ì¸ë±ìŠ¤ ì—…ë°ì´íŠ¸:

```javascript
// ê²Œì‹œë¬¼ ìƒì„± í›„
await axios.post(`/api/search/index/post/${postId}`, postData);

// ê²Œì‹œë¬¼ ì‚­ì œ ì‹œ
await axios.delete(`/api/search/index/post/${postId}`);
```

---

### 6. ì„œë²„ í†µí•©

**íŒŒì¼**: `server-backend/src/server.js`

**ë³€ê²½ ì‚¬í•­**:
```javascript
import searchRouter from './routes/search.js';

// ë¼ìš°í„° ë§ˆìš´íŠ¸
app.use('/api/search', searchRouter);
```

**Elasticsearch ì´ˆê¸°í™”** (ì„ íƒì ):
```javascript
import searchService from './services/search-service.js';

// ì„œë²„ ì‹œì‘ ì‹œ
await searchService.initialize();
```

---

## ğŸ“Š êµ¬í˜„ í†µê³„

### ì½”ë“œ í†µê³„
- **ì „ì²´ ì½”ë“œ ë¼ì¸ ìˆ˜**: ~2,100 lines
  - ê²€ìƒ‰ ì„œë¹„ìŠ¤: 600 lines
  - API ë¼ìš°í„°: 250 lines
  - UI ì»´í¬ë„ŒíŠ¸: 1,030 lines (4ê°œ íŒŒì¼)
  - ìŠ¤í¬ë¦½íŠ¸: 110 lines
  - ì„¤ì • íŒŒì¼: 30 lines

### íŒŒì¼ êµ¬ì¡°
```
server-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ search-service.js          (600 lines) âœ¨
â”‚   â””â”€â”€ routes/
â”‚       â””â”€â”€ search.js                  (250 lines) âœ¨
â””â”€â”€ scripts/
    â””â”€â”€ index-all-posts.js             (110 lines) âœ¨

frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ SearchBar.tsx              (280 lines) âœ¨
â”‚   â”‚   â”œâ”€â”€ SearchResults.tsx          (250 lines) âœ¨
â”‚   â”‚   â””â”€â”€ SearchFilters.tsx          (250 lines) âœ¨
â”‚   â””â”€â”€ pages/
â”‚       â””â”€â”€ SearchPage.tsx             (150 lines) âœ¨

docker-compose.yml                      (ì—…ë°ì´íŠ¸) âœ¨
```

### ì˜ì¡´ì„± ì¶”ê°€
```json
{
  "@elastic/elasticsearch": "^8.11.0"
}
```

---

## ğŸš€ ì‚¬ìš© ê°€ì´ë“œ

### 1. Elasticsearch ì‹œì‘

```bash
# Docker Composeë¡œ Elasticsearch ì‹œì‘
docker-compose up elasticsearch -d

# ìƒíƒœ í™•ì¸
curl http://localhost:9200/_cluster/health
```

### 2. ê¸°ì¡´ ë°ì´í„° ì¸ë±ì‹±

```bash
cd server-backend
node scripts/index-all-posts.js
```

### 3. ì„œë²„ ì¬ì‹œì‘

```bash
# ë°±ì—”ë“œ
cd server-backend
npm start

# í”„ë¡ íŠ¸ì—”ë“œ
cd frontend
npm run dev
```

### 4. ê²€ìƒ‰ ê¸°ëŠ¥ ì‚¬ìš©

**ì›¹ UI**:
1. í—¤ë” ê²€ìƒ‰ë°”ì— ê²€ìƒ‰ì–´ ì…ë ¥
2. ìë™ì™„ì„± ì œì•ˆ ì„ íƒ ë˜ëŠ” Enter
3. `/search?q=ê²€ìƒ‰ì–´` í˜ì´ì§€ë¡œ ì´ë™
4. í•„í„° ë° ì •ë ¬ ì˜µì…˜ ì¡°ì •

**API ì§ì ‘ í˜¸ì¶œ**:
```bash
# ê²Œì‹œë¬¼ ê²€ìƒ‰
curl -X POST http://localhost:50000/api/search/posts \
  -H "Content-Type: application/json" \
  -d '{
    "query": "React",
    "category": "ì§ˆë¬¸ê²Œì‹œíŒ",
    "sortBy": "date",
    "page": 1,
    "limit": 20
  }'

# ìë™ì™„ì„±
curl "http://localhost:50000/api/search/autocomplete?q=React&limit=5"

# ì¸ê¸° ê²€ìƒ‰ì–´
curl "http://localhost:50000/api/search/popular?limit=10"
```

---

## ğŸ¨ ê²€ìƒ‰ ê¸°ëŠ¥ íŠ¹ì§•

### 1. ì „ë¬¸ ê²€ìƒ‰ (Full-Text Search)
- **ë©€í‹° í•„ë“œ ê²€ìƒ‰**: ì œëª©, ë‚´ìš©, ì‘ì„±ì ë™ì‹œ ê²€ìƒ‰
- **ê°€ì¤‘ì¹˜ ì ìš©**: ì œëª© 3ë°°, ë‚´ìš© 1ë°°
- **í¼ì§€ ë§¤ì¹­**: ì˜¤íƒ€ ìë™ ë³´ì • (fuzziness: AUTO)
- **í•œê¸€ ì§€ì›**: í‘œì¤€ í† í¬ë‚˜ì´ì € ì‚¬ìš©

### 2. ìë™ì™„ì„±
- **ì‹¤ì‹œê°„ ì œì•ˆ**: 300ms debounceë¡œ ìµœì í™”
- **Prefix ë§¤ì¹­**: ì…ë ¥í•œ ë¬¸ìë¡œ ì‹œì‘í•˜ëŠ” ì œëª© ê²€ìƒ‰
- **ì¹´í…Œê³ ë¦¬ í‘œì‹œ**: ê° ì œì•ˆì— ì¹´í…Œê³ ë¦¬ ë±ƒì§€
- **ìµœëŒ€ 5ê°œ**: ê´€ë ¨ì„± ë†’ì€ ìƒìœ„ 5ê°œë§Œ í‘œì‹œ

### 3. ê³ ê¸‰ í•„í„°ë§
- **ì¹´í…Œê³ ë¦¬ í•„í„°**: ììœ ê²Œì‹œíŒ, ì§ˆë¬¸ê²Œì‹œíŒ ë“±
- **íƒœê·¸ í•„í„°**: ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥
- **ì‘ì„±ì í•„í„°**: íŠ¹ì • ì‚¬ìš©ì ê²Œì‹œë¬¼ë§Œ
- **ë‚ ì§œ ë²”ìœ„**: ì‹œì‘ì¼-ì¢…ë£Œì¼ ë˜ëŠ” ë¹ ë¥¸ ì„ íƒ
- **ì¡°í•© ê°€ëŠ¥**: ëª¨ë“  í•„í„° ë™ì‹œ ì ìš© ê°€ëŠ¥

### 4. ì •ë ¬ ì˜µì…˜
- **ê´€ë ¨ì„±**: Elasticsearch ìŠ¤ì½”ì–´ (ê¸°ë³¸ê°’)
- **ìµœì‹ ìˆœ**: ì‘ì„±ì¼ ë‚´ë¦¼ì°¨ìˆœ
- **ì¡°íšŒìˆ˜**: ì¸ê¸° ê²Œì‹œë¬¼ ìˆœ
- **ì¢‹ì•„ìš”**: ì¶”ì²œ ë§ì€ ìˆœ

### 5. ê²€ìƒ‰ ê²°ê³¼
- **í•˜ì´ë¼ì´íŠ¸**: ê²€ìƒ‰ì–´ ë§¤ì¹­ ë¶€ë¶„ ê°•ì¡° í‘œì‹œ
- **ìš”ì•½ í‘œì‹œ**: ë‚´ìš© 150ì ë¯¸ë¦¬ë³´ê¸°
- **í†µê³„ ì •ë³´**: ì¡°íšŒìˆ˜, ì¢‹ì•„ìš”, ëŒ“ê¸€ ìˆ˜
- **ìƒëŒ€ ì‹œê°„**: "3ì¼ ì „", "1ì£¼ì¼ ì „" í˜•ì‹

### 6. ì„±ëŠ¥ ìµœì í™”
- **ë””ë°”ìš´ì‹±**: 300ms ì§€ì—°ìœ¼ë¡œ API ìš”ì²­ ìµœì†Œí™”
- **í˜ì´ì§€ë„¤ì´ì…˜**: í•œ ë²ˆì— 20ê°œì”© ë¡œë“œ
- **ì¸ë±ìŠ¤ ìºì‹±**: Elasticsearch ìì²´ ìºì‹±
- **ë°°ì¹˜ ì¸ë±ì‹±**: 1000ê°œ ë‹¨ìœ„ ëŒ€ëŸ‰ ì²˜ë¦¬

---

## ğŸ”§ ì„¤ì • ì˜µì…˜

### Elasticsearch í™˜ê²½ ë³€ìˆ˜

```env
# .env íŒŒì¼
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_INDEX_PREFIX=community_
```

### ê²€ìƒ‰ ì„¤ì •

```javascript
// search-service.js
const SEARCH_CONFIG = {
  maxResultWindow: 10000,      // ìµœëŒ€ ê²€ìƒ‰ ê²°ê³¼ ìˆ˜
  highlightFragmentSize: 150,  // í•˜ì´ë¼ì´íŠ¸ ê¸¸ì´
  highlightNumberOfFragments: 3, // í•˜ì´ë¼ì´íŠ¸ ê°œìˆ˜
  fuzziness: 'AUTO',          // í¼ì§€ ë§¤ì¹­ ë ˆë²¨
  minimumShouldMatch: '75%'   // ìµœì†Œ ì¼ì¹˜ìœ¨
};
```

### UI ì„¤ì •

```typescript
// SearchPage.tsx
const DEFAULT_LIMIT = 20;           // í˜ì´ì§€ë‹¹ ê²°ê³¼ ìˆ˜
const AUTOCOMPLETE_DEBOUNCE = 300;  // ë””ë°”ìš´ìŠ¤ ì‹œê°„ (ms)
const MAX_SUGGESTIONS = 5;          // ìë™ì™„ì„± ìµœëŒ€ ê°œìˆ˜
const MAX_POPULAR_TERMS = 10;       // ì¸ê¸° ê²€ìƒ‰ì–´ ê°œìˆ˜
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

### ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

1. **ê¸°ë³¸ ê²€ìƒ‰**
   - ê²€ìƒ‰ë°”ì— "React" ì…ë ¥
   - ìë™ì™„ì„± ì œì•ˆ í™•ì¸
   - Enter í‚¤ë¡œ ê²€ìƒ‰ ì‹¤í–‰
   - ê²°ê³¼ í˜ì´ì§€ í™•ì¸

2. **í•„í„° ì ìš©**
   - ì¹´í…Œê³ ë¦¬ë¥¼ "ì§ˆë¬¸ê²Œì‹œíŒ"ìœ¼ë¡œ ì„ íƒ
   - íƒœê·¸ "JavaScript" ì²´í¬
   - ë‚ ì§œë¥¼ "ìµœê·¼ 1ê°œì›”"ë¡œ ì„¤ì •
   - ê²°ê³¼ ë³€ê²½ í™•ì¸

3. **ì •ë ¬ ë³€ê²½**
   - ì •ë ¬ì„ "ìµœì‹ ìˆœ"ìœ¼ë¡œ ë³€ê²½
   - ê²°ê³¼ ìˆœì„œ ë³€ê²½ í™•ì¸
   - "ì¡°íšŒìˆ˜"ë¡œ ë³€ê²½í•˜ì—¬ ì¬í™•ì¸

4. **í˜ì´ì§€ë„¤ì´ì…˜**
   - ë‹¤ìŒ í˜ì´ì§€ í´ë¦­
   - URL íŒŒë¼ë¯¸í„° ë³€ê²½ í™•ì¸
   - ì´ì „ í˜ì´ì§€ í´ë¦­

5. **ì¸ê¸° ê²€ìƒ‰ì–´**
   - ê²€ìƒ‰ë°” í´ë¦­ (ë¹ˆ ìƒíƒœ)
   - ì¸ê¸° ê²€ìƒ‰ì–´ ëª©ë¡ í™•ì¸
   - í´ë¦­í•˜ì—¬ ê²€ìƒ‰ ì‹¤í–‰

### E2E í…ŒìŠ¤íŠ¸ (ì„ íƒì )

```typescript
// frontend/tests/e2e/search.spec.ts
test('ê²€ìƒ‰ ê¸°ëŠ¥ ì „ì²´ í”Œë¡œìš°', async ({ page }) => {
  // 1. ë©”ì¸ í˜ì´ì§€ ë°©ë¬¸
  await page.goto('/');
  
  // 2. ê²€ìƒ‰ë°”ì— ì…ë ¥
  await page.fill('[placeholder*="ê²€ìƒ‰"]', 'React');
  
  // 3. ìë™ì™„ì„± í™•ì¸
  await page.waitForSelector('[role="listitem"]');
  
  // 4. Enter í‚¤ë¡œ ê²€ìƒ‰
  await page.press('[placeholder*="ê²€ìƒ‰"]', 'Enter');
  
  // 5. ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€ í™•ì¸
  await expect(page).toHaveURL(/\/search\?q=React/);
  await expect(page.locator('text="ê²€ìƒ‰ ê²°ê³¼"')).toBeVisible();
  
  // 6. í•„í„° ì ìš©
  await page.selectOption('[name="category"]', 'ì§ˆë¬¸ê²Œì‹œíŒ');
  
  // 7. ê²°ê³¼ í´ë¦­
  await page.click('text="React Hooks"');
  await expect(page).toHaveURL(/\/post\/\d+/);
});
```

---

## ğŸ“ˆ ì„±ëŠ¥ ì§€í‘œ

### Elasticsearch ì„±ëŠ¥
- **ì¸ë±ì‹± ì†ë„**: ~1000 documents/sec
- **ê²€ìƒ‰ ì‘ë‹µ ì‹œê°„**: < 100ms (í‰ê· )
- **ìë™ì™„ì„± ì‘ë‹µ ì‹œê°„**: < 50ms (í‰ê· )
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: 512MB-1GB

### í”„ë¡ íŠ¸ì—”ë“œ ì„±ëŠ¥
- **ì²« ë Œë”ë§**: < 500ms
- **ìë™ì™„ì„± ë””ë°”ìš´ìŠ¤**: 300ms
- **í˜ì´ì§€ ì „í™˜**: < 200ms
- **í•„í„° ì ìš©**: < 100ms

### ì˜ˆìƒ ì²˜ë¦¬ëŸ‰
- **ë™ì‹œ ê²€ìƒ‰ ìš”ì²­**: ~100 req/sec
- **ì¸ë±ì‹± ì²˜ë¦¬ëŸ‰**: ~1000 docs/sec
- **ìµœëŒ€ ì¸ë±ìŠ¤ í¬ê¸°**: 10GB (ì•½ 10ë§Œ ê²Œì‹œë¬¼)

---

## ğŸ” ë¬¸ì œ í•´ê²°

### Elasticsearch ì—°ê²° ì‹¤íŒ¨

**ì¦ìƒ**: `ECONNREFUSED` ì˜¤ë¥˜

**í•´ê²°**:
```bash
# Elasticsearch ìƒíƒœ í™•ì¸
docker ps | grep elasticsearch

# ë¡œê·¸ í™•ì¸
docker logs <container_id>

# ì¬ì‹œì‘
docker-compose restart elasticsearch
```

### ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ

**ì¦ìƒ**: ê²€ìƒ‰í•´ë„ ê²°ê³¼ê°€ 0ê°œ

**í•´ê²°**:
```bash
# ì¸ë±ìŠ¤ í™•ì¸
curl http://localhost:9200/_cat/indices

# ê²Œì‹œë¬¼ ìˆ˜ í™•ì¸
curl http://localhost:9200/community_posts/_count

# ì¬ì¸ë±ì‹±
node scripts/index-all-posts.js
```

### ìë™ì™„ì„± ëŠë¦¼

**ì¦ìƒ**: ì…ë ¥ ì‹œ ì§€ì—° ë°œìƒ

**í•´ê²°**:
- ë””ë°”ìš´ìŠ¤ ì‹œê°„ ì¦ê°€ (300ms â†’ 500ms)
- Elasticsearch ë©”ëª¨ë¦¬ ì¦ê°€
- ìë™ì™„ì„± ê²°ê³¼ ìˆ˜ ê°ì†Œ (5ê°œ â†’ 3ê°œ)

### í•œê¸€ ê²€ìƒ‰ ì •í™•ë„ ë‚®ìŒ

**ì¦ìƒ**: í•œê¸€ ê²€ìƒ‰ì´ ì˜ì–´ë³´ë‹¤ ë¶€ì •í™•

**í•´ê²°**:
- Nori í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ (í•œê¸€ í˜•íƒœì†Œ ë¶„ì„ê¸°)
- ì»¤ìŠ¤í…€ ë¶„ì„ê¸° ì„¤ì •
- ë™ì˜ì–´ ì‚¬ì „ ì¶”ê°€

---

## ğŸš€ í–¥í›„ ê°œì„  ì‚¬í•­

### 1. ê²€ìƒ‰ í’ˆì§ˆ ê°œì„  â­
- [ ] Nori í•œê¸€ í˜•íƒœì†Œ ë¶„ì„ê¸° ì„¤ì¹˜
- [ ] ë™ì˜ì–´ ì‚¬ì „ êµ¬ì¶• (React = ë¦¬ì•¡íŠ¸)
- [ ] ë¶ˆìš©ì–´ í•„í„° ì¶”ê°€
- [ ] ê²€ìƒ‰ì–´ ì¶”ì²œ (Did you mean?)

### 2. ê¸°ëŠ¥ í™•ì¥ â­â­
- [ ] ì´ë¯¸ì§€ ê²€ìƒ‰ (OCR í†µí•©)
- [ ] ìŒì„± ê²€ìƒ‰ (Web Speech API)
- [ ] ê²€ìƒ‰ íˆìŠ¤í† ë¦¬ ì €ì¥
- [ ] ê°œì¸í™” ê²€ìƒ‰ (ì‚¬ìš©ì ì„ í˜¸ë„ ë°˜ì˜)

### 3. ë¶„ì„ ë° ëª¨ë‹ˆí„°ë§ â­â­â­
- [ ] ê²€ìƒ‰ ë¡œê·¸ ìˆ˜ì§‘ (ì‹¤ì œ ì¸ê¸° ê²€ìƒ‰ì–´)
- [ ] ê²€ìƒ‰ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ (ì‘ë‹µ ì‹œê°„, ì²˜ë¦¬ëŸ‰)
- [ ] A/B í…ŒìŠ¤íŠ¸ (ì •ë ¬ ì•Œê³ ë¦¬ì¦˜)
- [ ] ê²€ìƒ‰ í’ˆì§ˆ ì§€í‘œ (í´ë¦­ë¥ , ì´íƒˆë¥ )

### 4. ì„±ëŠ¥ ìµœì í™” â­â­
- [ ] Redis ìºì‹± (ì¸ê¸° ê²€ìƒ‰ì–´, ìµœê·¼ ê²€ìƒ‰)
- [ ] CDN ì ìš© (ì •ì  ë¦¬ì†ŒìŠ¤)
- [ ] ê²€ìƒ‰ ê²°ê³¼ í”„ë¦¬í˜ì¹­
- [ ] ë¬´í•œ ìŠ¤í¬ë¡¤ (í˜ì´ì§€ë„¤ì´ì…˜ ëŒ€ì²´)

### 5. UX ê°œì„  â­
- [ ] ê²€ìƒ‰ í•„í„° í”„ë¦¬ì…‹ (ìì£¼ ì“°ëŠ” ì¡°í•© ì €ì¥)
- [ ] ëª¨ë°”ì¼ ìµœì í™” (í„°ì¹˜ ì œìŠ¤ì²˜)
- [ ] ë‹¤í¬ ëª¨ë“œ ì§€ì›
- [ ] ì ‘ê·¼ì„± ê°œì„  (ARIA labels, í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜)

---

## ğŸ“š ì°¸ê³  ìë£Œ

### Elasticsearch ë¬¸ì„œ
- [Elasticsearch Guide](https://www.elastic.co/guide/en/elasticsearch/reference/8.11/index.html)
- [Full-Text Search](https://www.elastic.co/guide/en/elasticsearch/reference/8.11/full-text-queries.html)
- [Aggregations](https://www.elastic.co/guide/en/elasticsearch/reference/8.11/search-aggregations.html)
- [Highlighting](https://www.elastic.co/guide/en/elasticsearch/reference/8.11/highlighting.html)

### í•œê¸€ ê²€ìƒ‰
- [Nori Plugin](https://www.elastic.co/guide/en/elasticsearch/plugins/8.11/analysis-nori.html)
- [í•œê¸€ í˜•íƒœì†Œ ë¶„ì„](https://esbook.kimjmin.net/06-text-analysis/6.7-stemming/6.7.2-nori)

### React ì»´í¬ë„ŒíŠ¸
- [Chakra UI](https://chakra-ui.com/)
- [React Hooks](https://react.dev/reference/react)
- [TypeScript](https://www.typescriptlang.org/)

---

## âœ… ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°±ì—”ë“œ
- [x] Elasticsearch ì„¤ì¹˜ ë° ì„¤ì •
- [x] ê²€ìƒ‰ ì„œë¹„ìŠ¤ êµ¬í˜„ (600+ lines)
- [x] API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ (8ê°œ)
- [x] ëŒ€ëŸ‰ ì¸ë±ì‹± ìŠ¤í¬ë¦½íŠ¸
- [x] ì„œë²„ í†µí•© (ë¼ìš°í„° ë§ˆìš´íŠ¸)

### í”„ë¡ íŠ¸ì—”ë“œ
- [x] SearchBar ì»´í¬ë„ŒíŠ¸ (ìë™ì™„ì„±)
- [x] SearchResults ì»´í¬ë„ŒíŠ¸ (í˜ì´ì§€ë„¤ì´ì…˜)
- [x] SearchFilters ì»´í¬ë„ŒíŠ¸ (ê³ ê¸‰ í•„í„°)
- [x] SearchPage í†µí•©
- [x] URL íŒŒë¼ë¯¸í„° ì—°ë™

### í…ŒìŠ¤íŠ¸
- [x] ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„±
- [ ] E2E í…ŒìŠ¤íŠ¸ (Playwright) - ì„ íƒì 

### ë¬¸ì„œ
- [x] ì™„ë£Œ ë³´ê³ ì„œ ì‘ì„±
- [x] ì‚¬ìš© ê°€ì´ë“œ ì‘ì„±
- [x] API ë¬¸ì„œ ì‘ì„±
- [x] ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

---

## ğŸ‰ ê²°ë¡ 

**Phase 3 Task #2 (ê³ ê¸‰ ê²€ìƒ‰ ì‹œìŠ¤í…œ)ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!**

### ì£¼ìš” ì„±ê³¼
- âœ… Elasticsearch ê¸°ë°˜ ì „ë¬¸ ê²€ìƒ‰ êµ¬í˜„
- âœ… ì‹¤ì‹œê°„ ìë™ì™„ì„± ë° ì¸ê¸° ê²€ìƒ‰ì–´
- âœ… ê³ ê¸‰ í•„í„°ë§ ë° ë‹¤ì–‘í•œ ì •ë ¬ ì˜µì…˜
- âœ… ì§ê´€ì ì¸ UI ë° í•˜ì´ë¼ì´íŠ¸ í‘œì‹œ
- âœ… ëŒ€ëŸ‰ ì¸ë±ì‹± ìë™í™”

### ì½”ë“œ í†µê³„
- **2,100+ lines** of code
- **8ê°œ API** ì—”ë“œí¬ì¸íŠ¸
- **4ê°œ React** ì»´í¬ë„ŒíŠ¸
- **1ê°œ ì¸ë±ì‹±** ìŠ¤í¬ë¦½íŠ¸

### ë‹¤ìŒ ì‘ì—…
**Phase 3 Task #3**: ì‚¬ìš©ì í”„ë¡œí•„ v2 (ì˜ˆìƒ 3ì¼)

---

**ì‘ì„±ì**: AUTOAGENTS  
**ê²€í† ì**: Development Team  
**ìŠ¹ì¸ì¼**: 2025ë…„ 11ì›” 9ì¼

Â© 2025 LeeHwiRyeon. All rights reserved.
