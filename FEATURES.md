# ğŸ“˜ Community Platform v1.0 - ê¸°ëŠ¥ ìš”ì•½

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025ë…„ 11ì›” 9ì¼  
**ê²€ì¦ ë°©ë²•**: ì†ŒìŠ¤ ì½”ë“œ ì§ì ‘ ê²€í†  (270+ íŒŒì¼)  
**ê²€ì¦ ê²°ê³¼**: âœ… 35ê°œ í•µì‹¬ ê¸°ëŠ¥ + 2ê°œ í†µí•© ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ

> ğŸ“– **ìƒì„¸ ëª…ì„¸ì„œ**: ê° ê¸°ëŠ¥ì˜ ìƒì„¸í•œ êµ¬í˜„ ë‚´ì—­ì€ [FEATURES_DETAILED_v1.0.md](./FEATURES_DETAILED_v1.0.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

---

## âœ… êµ¬í˜„ ì™„ë£Œ ê¸°ëŠ¥ (36ê°œ)

### ğŸ”’ ì¸ì¦ ë° ë³´ì•ˆ (9ê°œ)
1. **JWT í† í° ì¸ì¦** - Access Token (15ë¶„) + Refresh Token (14ì¼) ì´ì¤‘ ì „ëµ
2. **ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)** - Admin, Moderator, User ê¶Œí•œ ê´€ë¦¬
3. **XSS ë°©ì–´** - xss ë¼ì´ë¸ŒëŸ¬ë¦¬ ê¸°ë°˜ ì…ë ¥ ì •ì œ
4. **SQL ì¸ì ì…˜ ë°©ì–´** - mongo-sanitize + íŒ¨í„´ ê°ì§€
5. **Rate Limiting** - ì—”ë“œí¬ì¸íŠ¸ë³„ ì°¨ë³„í™”ëœ ì†ë„ ì œí•œ
6. **CORS ì •ì±…** - í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ê¸°ë°˜ Origin ê²€ì¦
7. **ë³´ì•ˆ í—¤ë” (Helmet.js)** - CSP, HSTS, X-Frame-Options ì„¤ì •
8. **ë©”ì‹œì§€ ì•”í˜¸í™”** - AES-256-CBC ì•”í˜¸í™” (âš ï¸ GCM ì „í™˜ í•„ìš”)
9. **ê³„ì • ì ê¸ˆ ì‹œìŠ¤í…œ** - 5íšŒ ì‹¤íŒ¨ ì‹œ 15ë¶„ ì ê¸ˆ

### ğŸ“‹ ê²Œì‹œíŒ ë° ì½˜í…ì¸  (8ê°œ)
11. **ê²Œì‹œíŒ ì‹œìŠ¤í…œ** - ë‹¤ì¤‘ ê²Œì‹œíŒ, ë…ë¦½ì  ì„¤ì • ì§€ì›
12. **ê²Œì‹œë¬¼ CRUD** - ì‘ì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ
13. **ê²Œì‹œë¬¼ ì¡°íšŒìˆ˜** - ìë™ ì¹´ìš´íŒ… ë° ì¤‘ë³µ ë°©ì§€
14. **ëŒ“ê¸€ ì‹œìŠ¤í…œ** - ê³„ì¸µì  êµ¬ì¡°, ë¬´í•œ ê¹Šì´ ë‹µê¸€
15. **íˆ¬í‘œ ì‹œìŠ¤í…œ** - ê²Œì‹œë¬¼/ëŒ“ê¸€ ì°¬ì„±/ë°˜ëŒ€ íˆ¬í‘œ
16. **íƒœê·¸ ì‹œìŠ¤í…œ** - íƒœê·¸ ìë™ ì™„ì„±, í´ë¼ìš°ë“œ, í•„í„°ë§
17. **ê²€ìƒ‰ ê¸°ëŠ¥** - í‚¤ì›Œë“œ ê²€ìƒ‰, ë‹¤ì¤‘ í•„í„°, ì •ë ¬
18. **ì„ì‹œ ì €ì¥** - ìë™/ìˆ˜ë™ ì €ì¥, ì´ˆì•ˆ ê´€ë¦¬

### ğŸ‘¤ ì‚¬ìš©ì í”„ë¡œí•„ ì‹œìŠ¤í…œ (6ê°œ)
19. **RPG í”„ë¡œí•„ ì‹œìŠ¤í…œ** - ê²Œì„í™” ìš”ì†Œ ì ìš©
20. **ë ˆë²¨ ì‹œìŠ¤í…œ** - Lv.1~10, í™œë™ ê¸°ë°˜ ê²½í—˜ì¹˜
21. **ë°°ì§€ ë° ì¹­í˜¸** - í™œë™ ê¸°ë°˜ ìë™ íšë“
22. **ì‚¬ìš©ì í†µê³„** - ê²Œì‹œë¬¼, ëŒ“ê¸€, ì¡°íšŒìˆ˜, ì¢‹ì•„ìš” ì¶”ì 
23. **í”„ë¡œí•„ ì¹´ë“œ** - ê°„ë‹¨í•œ ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
24. **í”„ë¡œí•„ í˜ì´ì§€** - ìƒì„¸ í”„ë¡œí•„ ë° í™œë™ ë‚´ì—­

### ğŸ’¬ ì†Œì…œ ê¸°ëŠ¥ (4ê°œ)
25. **ì•Œë¦¼ ì‹œìŠ¤í…œ** - ì‹¤ì‹œê°„ ì•Œë¦¼ ì„¼í„°
26. **ì•Œë¦¼ ì„¤ì •** - ì•Œë¦¼ ì„ í˜¸ë„ ê´€ë¦¬
27. **ì‹¤ì‹œê°„ ëŒ“ê¸€** - WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
28. **ìŠ¤íŒ¸ ë°©ì§€ ì‹œìŠ¤í…œ** - ìë™ ìŠ¤íŒ¸ ê°ì§€ ë° ì°¨ë‹¨ (í†µí•© ì™„ë£Œ)

### âš¡ ì„±ëŠ¥ ë° UX (5ê°œ)
29. **ì„±ëŠ¥ ìµœì í™” ì‹œìŠ¤í…œ** - ì´ë¯¸ì§€ ì§€ì—° ë¡œë”©, ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…
30. **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§** - ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ë° ë¶„ì„
31. **ê°€ìƒ ìŠ¤í¬ë¡¤** - ëŒ€ëŸ‰ ë°ì´í„° íš¨ìœ¨ì  ë Œë”ë§
32. **ì ‘ê·¼ì„± ë„êµ¬** - í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜, ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì›
33. **UI/UX v2 ë””ìì¸ ì‹œìŠ¤í…œ** - í˜„ëŒ€ì  UI ì»´í¬ë„ŒíŠ¸ (í†µí•© ì™„ë£Œ)

### ğŸ§ª í…ŒìŠ¤íŠ¸ ë° CI/CD (2ê°œ)
33. **E2E í…ŒìŠ¤íŠ¸** - Playwright ê¸°ë°˜ ì—”ë“œíˆ¬ì—”ë“œ í…ŒìŠ¤íŠ¸
34. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸** - Vitest 3.2.4 + React Testing Library

### ğŸš€ ë°°í¬ ë° ì¸í”„ë¼ (2ê°œ)
35. **CI/CD íŒŒì´í”„ë¼ì¸** - GitHub Actions ìë™í™”
36. **Docker ì»¨í…Œì´ë„ˆí™”** - docker-compose ê°œë°œ í™˜ê²½

---

## âš ï¸ ê¸´ê¸‰ ë³´ì•ˆ ê°œì„  í•„ìš” (4ê°œ)

ë‹¤ìŒ 4ê°œ í•­ëª©ì€ ê¸´ê¸‰ ë³´ì•ˆ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤. ìƒì„¸ ê¸°íšì€ [SECURITY_URGENT_IMPROVEMENTS.md](./SECURITY_URGENT_IMPROVEMENTS.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

1. **JWT Secret í™˜ê²½ ë³€ìˆ˜ í•„ìˆ˜í™”** - í˜„ì¬ ê¸°ë³¸ê°’ fallback ì œê±°
2. **í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸ êµ¬í˜„** - ê°•ì œ ë¡œê·¸ì•„ì›ƒ ì§€ì›
3. **ë©”ì‹œì§€ ì•”í˜¸í™” ê°•í™” (AES-GCM)** - CBC â†’ GCM ì „í™˜
4. **CSRF í† í° ì™„ì „ êµ¬í˜„** - Double Submit Cookie íŒ¨í„´

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 8ì¼ (1.5ì£¼)

---

## ğŸ“ Phase 2 ê³„íš ê¸°ëŠ¥ (ë¯¸êµ¬í˜„)

ë‹¤ìŒ ê¸°ëŠ¥ì€ Phase 2 ì´í›„ ê°œë°œ ì˜ˆì •ì…ë‹ˆë‹¤. ë¡œë“œë§µì€ [ROADMAP_v1.0.md](./ROADMAP_v1.0.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

- **ì˜¨ë¼ì¸ ìƒíƒœ í‘œì‹œ** - ì‚¬ìš©ì ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ ìƒíƒœ
- **ëª¨ë”ë ˆì´í„° ë„êµ¬** - ê²Œì‹œë¬¼ ì‹ ê³ /ì°¨ë‹¨, ì‚¬ìš©ì ê²½ê³ /ë°´
- **ì»¤ë®¤ë‹ˆí‹° ê·œì¹™** - ê²Œì‹œíŒë³„ ìë™í™”ëœ ê·œì¹™ ì ìš©
- **ì‚¬ìš©ì ì‹ ê³  ì‹œìŠ¤í…œ** - ì½˜í…ì¸ /ì‚¬ìš©ì ì‹ ê³  ë° ê²€í†  í”„ë¡œì„¸ìŠ¤
- **ìë™ ëª¨ë”ë ˆì´ì…˜** - AI ê¸°ë°˜ ìŠ¤íŒ¸/ë¶€ì ì ˆ ì½˜í…ì¸  í•„í„°ë§
- **ì½˜í…ì¸  ì¶”ì²œ** - ì‚¬ìš©ì ê´€ì‹¬ì‚¬ ê¸°ë°˜ ì•Œê³ ë¦¬ì¦˜ ì¶”ì²œ
- **íŒ”ë¡œìš° ì‹œìŠ¤í…œ** - ì‚¬ìš©ì/ê²Œì‹œíŒ íŒ”ë¡œìš° ë° ë§ì¶¤ í”¼ë“œ
- **ë¶ë§ˆí¬/ì €ì¥** - ê´€ì‹¬ ì½˜í…ì¸  ê°œì¸ ì €ì¥

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### í”„ë¡ íŠ¸ì—”ë“œ
- React 18.2.0, TypeScript, Vite 4.5.14
- Chakra UI 2.8.2, TanStack Query 5.51.3, React Router 7.9.1

### ë°±ì—”ë“œ
- Express.js 4.x, REST API, MySQL 8.x
- JWT, bcrypt íŒ¨ìŠ¤ì›Œë“œ í•´ì‹±

### ë³´ì•ˆ
- Helmet.js, express-validator, xss, mongo-sanitize, CORS, Rate Limiting

### í…ŒìŠ¤íŠ¸
- Playwright (E2E), Vitest 3.2.4, React Testing Library, @vitest/coverage-v8

### CI/CD
- GitHub Actions, Docker, docker-compose

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

### ê¸°ëŠ¥ ë¬¸ì„œ
- **[FEATURES_DETAILED_v1.0.md](./FEATURES_DETAILED_v1.0.md)** â­ - ê° ê¸°ëŠ¥ì˜ ìƒì„¸ êµ¬í˜„ ë‚´ì—­ (API, ìŠ¤í™, ì˜ˆì‹œ ì½”ë“œ)
- **[CODE_VERIFICATION_MATRIX.md](./CODE_VERIFICATION_MATRIX.md)** - ê¸°ëŠ¥ë³„ ì½”ë“œ ê²€ì¦ ë§¤íŠ¸ë¦­ìŠ¤

### ë³´ì•ˆ ë¬¸ì„œ
- **[SECURITY_URGENT_IMPROVEMENTS.md](./SECURITY_URGENT_IMPROVEMENTS.md)** â­ - ê¸´ê¸‰ ë³´ì•ˆ ê°œì„  ìƒì„¸ ê¸°íšì„œ
- **[SECURITY_DETAILED_PLAN.md](./SECURITY_DETAILED_PLAN.md)** - ë³´ì•ˆ ê¸°ëŠ¥ ìƒì„¸ ì„¤ëª…
- **[SECURITY.md](./SECURITY.md)** - ë³´ì•ˆ ê°€ì´ë“œ ë° ì •ì±…

### í”„ë¡œì íŠ¸ ê´€ë¦¬
- **[PROJECT_OVERVIEW_v1.0.md](./PROJECT_OVERVIEW_v1.0.md)** - í”„ë¡œì íŠ¸ ì „ì²´ ê¸°ìˆ  ë¬¸ì„œ
- **[ROADMAP_v1.0.md](./ROADMAP_v1.0.md)** - Phase 1-4 ê°œë°œ ë¡œë“œë§µ
- **[DOCUMENTS_INDEX_v1.0.md](./DOCUMENTS_INDEX_v1.0.md)** - ë¬¸ì„œ ë„¤ë¹„ê²Œì´ì…˜ ì¸ë±ìŠ¤

### ê¸°ìˆ  ë¬¸ì„œ
- **[DB_SCHEMA.md](./DB_SCHEMA.md)** - ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
- **[API_REFERENCE.md](./API_REFERENCE.md)** - REST API ì—”ë“œí¬ì¸íŠ¸

---

**ë¬¸ì„œ ë²„ì „**: v1.0  
**ìµœì¢… ê²€ì¦**: 2025ë…„ 11ì›” 9ì¼  
**ê²€ì¦ ë°©ë²•**: ì†ŒìŠ¤ ì½”ë“œ ì§ì ‘ ê²€í†  (270+ íŒŒì¼)

*ì´ ë¬¸ì„œëŠ” Community Platform v1.0ì˜ ì‹¤ì œ êµ¬í˜„ëœ ê¸°ëŠ¥ë§Œì„ ìš”ì•½í•œ ê²ƒì…ë‹ˆë‹¤.*  
*FirebaseëŠ” ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©°, JWT ê¸°ë°˜ ì¸ì¦ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.*  
*ìƒì„¸ ë‚´ì—­ì€ FEATURES_DETAILED_v1.0.mdë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.*



### 1.2 êµ¬í˜„ í˜„í™©
- âœ… **35ê°œ í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„** (ì½”ë“œ ê²€ì¦ ì™„ë£Œ)
- âœ… **2ê°œ ê³ ê¸‰ ê¸°ëŠ¥ í†µí•©** (UIUXV2DesignSystem, SpamPreventionSystem)
- âš ï¸ **5ê°œ ê¸´ê¸‰ ë³´ì•ˆ ê°œì„  í•„ìš”** (SECURITY_URGENT_IMPROVEMENTS.md ì°¸ì¡°)
- ğŸ“ **Phase 2 ê³„íš ê¸°ëŠ¥**: ì˜¨ë¼ì¸ ìƒíƒœ í‘œì‹œ, ëª¨ë”ë ˆì´í„° ë„êµ¬ (ROADMAP_v1.0.md ì°¸ì¡°)

---

## 2. ì¸ì¦ ë° ë³´ì•ˆ

Community Platformì€ ë‹¤ì¸µ ë³´ì•ˆ ì•„í‚¤í…ì²˜ë¥¼ í†µí•´ ì‚¬ìš©ì ë°ì´í„°ì™€ ì‹œìŠ¤í…œ ë¬´ê²°ì„±ì„ ë³´í˜¸í•©ë‹ˆë‹¤.

### 2.1 JWT í† í° ì¸ì¦ ì‹œìŠ¤í…œ

#### ê°œìš”
JWT(JSON Web Token) ê¸°ë°˜ ë¬´ìƒíƒœ(stateless) ì¸ì¦ ì‹œìŠ¤í…œìœ¼ë¡œ Access Tokenê³¼ Refresh Tokenì„ ì‚¬ìš©í•œ ì´ì¤‘ í† í° ì „ëµì„ êµ¬í˜„í•©ë‹ˆë‹¤.

#### êµ¬í˜„ íŒŒì¼
- **ë°±ì—”ë“œ**: `server-backend/src/auth/jwt.js`
- **í…ŒìŠ¤íŠ¸**: `server-backend/tests/auth-jwt.test.js`

#### ì£¼ìš” ìŠ¤í™
```javascript
// Access Token
{
  sub: "user_id",           // ì‚¬ìš©ì ID
  role: "user|moderator|admin",
  typ: "access",
  jti: "unique_token_id",   // JWT ID (ë¸”ë™ë¦¬ìŠ¤íŠ¸ìš©)
  iat: 1234567890,          // ë°œê¸‰ ì‹œê°„
  exp: 1234568790,          // ë§Œë£Œ ì‹œê°„ (15ë¶„)
  iss: "community-platform",
  aud: "community-platform-users"
}

// Refresh Token
{
  sub: "user_id",
  typ: "refresh",
  jti: "unique_refresh_id",
  iat: 1234567890,
  exp: 1235777690,          // ë§Œë£Œ ì‹œê°„ (14ì¼)
  iss: "community-platform",
  aud: "community-platform-users"
}
```

#### ë³´ì•ˆ íŠ¹ì„±
- **ì•Œê³ ë¦¬ì¦˜**: HS256 (HMAC SHA-256)
- **Access Token ë§Œë£Œ**: 15ë¶„
- **Refresh Token ë§Œë£Œ**: 14ì¼
- **Secret ê¸¸ì´**: 64 bytes ê¶Œì¥
- **Redis ì €ì¥**: Refresh Tokenì€ Redisì— ì €ì¥ (ë¸”ë™ë¦¬ìŠ¤íŠ¸ìš©)

#### ì¸ì¦ í”Œë¡œìš°
```
1. ë¡œê·¸ì¸ â†’ JWT ë°œê¸‰ (Access + Refresh)
2. API ìš”ì²­ ì‹œ Access Token ê²€ì¦
3. Access Token ë§Œë£Œ ì‹œ Refresh Tokenìœ¼ë¡œ ì¬ë°œê¸‰
4. Refresh Token ë§Œë£Œ ì‹œ ì¬ë¡œê·¸ì¸ í•„ìš”
```

#### âš ï¸ ë³´ì•ˆ ê°œì„  í•„ìš” ì‚¬í•­
1. **JWT_SECRET í™˜ê²½ ë³€ìˆ˜ í•„ìˆ˜í™”** (í˜„ì¬ ê¸°ë³¸ê°’ fallback ì¡´ì¬)
2. **í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸ êµ¬í˜„** (ê°•ì œ ë¡œê·¸ì•„ì›ƒ ì§€ì›)

ìì„¸í•œ ë‚´ìš©: [SECURITY_URGENT_IMPROVEMENTS.md](./SECURITY_URGENT_IMPROVEMENTS.md)

---

### 2.2 Firebase ì¸ì¦

#### ê°œìš”
Firebase Authenticationì„ í†µí•´ Google OAuth ë° ìµëª… ë¡œê·¸ì¸ì„ ì§€ì›í•©ë‹ˆë‹¤.

#### êµ¬í˜„ íŒŒì¼
- **í”„ë¡ íŠ¸ì—”ë“œ**: `frontend/src/services/AuthService.ts`
- **íƒ€ì… ì •ì˜**: `frontend/src/types/auth.ts`

#### ì§€ì› ì¸ì¦ ë°©ë²•
1. **Google OAuth ë¡œê·¸ì¸**
   - Google ê³„ì • ì—°ë™
   - í”„ë¡œí•„ ì •ë³´ ìë™ ê°€ì ¸ì˜¤ê¸° (ì´ë¦„, ì´ë©”ì¼, ì‚¬ì§„)
   
2. **ìµëª… ë¡œê·¸ì¸**
   - íšŒì›ê°€ì… ì—†ì´ ì„ì‹œ ì‚¬ìš©ì ìƒì„±
   - ê²Œì‹œë¬¼ ì½ê¸°, ëŒ“ê¸€ ì‘ì„± ë“± ì œí•œì  ê¸°ëŠ¥ ì œê³µ
   - ì¶”í›„ ì •ì‹ ê³„ì • ì „í™˜ ê°€ëŠ¥

#### Firebase ì„¤ì •
```typescript
const firebaseConfig = {
    apiKey: "AIzaSy...",              // âš ï¸ í™˜ê²½ ë³€ìˆ˜ë¡œ ì´ë™ í•„ìš”
    authDomain: "thenewspaper-platform.firebaseapp.com",
    projectId: "thenewspaper-platform",
    storageBucket: "thenewspaper-platform.appspot.com",
    messagingSenderId: "123456789012",
    appId: "1:123456789012:web:abcdefghijklmnop"
};
```

#### âš ï¸ ë³´ì•ˆ ê°œì„  í•„ìš” ì‚¬í•­
**Firebase API Key í™˜ê²½ ë³€ìˆ˜ ì´ë™** (í˜„ì¬ í•˜ë“œì½”ë”©)

ìì„¸í•œ ë‚´ìš©: [SECURITY_URGENT_IMPROVEMENTS.md](./SECURITY_URGENT_IMPROVEMENTS.md)

---

### 2.3 ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)

#### ê°œìš”
ì‚¬ìš©ì ì—­í• ì— ë”°ë¼ API ì—”ë“œí¬ì¸íŠ¸ ë° ê¸°ëŠ¥ ì ‘ê·¼ì„ ì œí•œí•˜ëŠ” ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

#### êµ¬í˜„ íŒŒì¼
- **ë°±ì—”ë“œ**: `server-backend/src/middleware/security.js`
- **ë°ì´í„°ë² ì´ìŠ¤**: `users` í…Œì´ë¸”ì˜ `role` ì»¬ëŸ¼

#### ì—­í•  ê³„ì¸µ
```
admin (ê´€ë¦¬ì)
  â””â”€ ëª¨ë“  ê¶Œí•œ (ì‚¬ìš©ì ê´€ë¦¬, ì‹œìŠ¤í…œ ì„¤ì •, ì½˜í…ì¸  ê´€ë¦¬)

moderator (ëª¨ë”ë ˆì´í„°)
  â””â”€ ì½˜í…ì¸  ê´€ë¦¬ (ê²Œì‹œë¬¼ ì‚­ì œ, ì‚¬ìš©ì ê²½ê³ , ì‹ ê³  ì²˜ë¦¬)

user (ì¼ë°˜ ì‚¬ìš©ì)
  â””â”€ ê¸°ë³¸ ê¶Œí•œ (ê²Œì‹œë¬¼ ì‘ì„±, ëŒ“ê¸€, íˆ¬í‘œ)
```

#### ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš© ì˜ˆì‹œ
```javascript
// ê´€ë¦¬ì ì „ìš© ì—”ë“œí¬ì¸íŠ¸
router.get('/api/admin/users', requireAdmin, async (req, res) => {
    // ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥
});

// ëª¨ë”ë ˆì´í„° ì´ìƒ ê¶Œí•œ í•„ìš”
router.delete('/api/posts/:id', requireModerator, async (req, res) => {
    // ëª¨ë”ë ˆì´í„° ë˜ëŠ” ê´€ë¦¬ìë§Œ ì‚­ì œ ê°€ëŠ¥
});

// ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼
router.post('/api/posts', authenticateToken, async (req, res) => {
    // ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ê²Œì‹œ ê°€ëŠ¥
});
```

#### ê¶Œí•œ í™•ì¸ ë¡œì§
```javascript
function requireAdmin(req, res, next) {
    if (req.user.role !== 'admin') {
        return res.status(403).json({ error: 'Admin access required' });
    }
    next();
}
```

---

### 2.4 XSS ë°©ì–´

#### ê°œìš”
Cross-Site Scripting(XSS) ê³µê²©ì„ ë°©ì–´í•˜ê¸° ìœ„í•œ ì…ë ¥ ë°ì´í„° ì •ì œ ë° ì¶œë ¥ ì´ìŠ¤ì¼€ì´í•‘ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

#### êµ¬í˜„ íŒŒì¼
- **ë°±ì—”ë“œ**: `server-backend/src/middleware/security.js`
- **ë¼ì´ë¸ŒëŸ¬ë¦¬**: `xss` (npm package)

#### ë°©ì–´ ë©”ì»¤ë‹ˆì¦˜
```javascript
import xss from 'xss';

const xssProtection = (req, res, next) => {
    if (req.body) {
        req.body = sanitizeObject(req.body);
    }
    next();
};

function sanitizeObject(obj) {
    if (typeof obj === 'string') {
        return xss(obj, {
            whiteList: {
                a: ['href', 'title'],
                b: [],
                strong: [],
                em: [],
                p: [],
                br: []
            }
        });
    }
    if (typeof obj === 'object' && obj !== null) {
        for (let key in obj) {
            obj[key] = sanitizeObject(obj[key]);
        }
    }
    return obj;
}
```

#### í—ˆìš©ëœ HTML íƒœê·¸
- `<a>` (href, title ì†ì„±ë§Œ)
- `<b>`, `<strong>` (êµµì€ ê¸€ì”¨)
- `<em>` (ê¸°ìš¸ì„ê¼´)
- `<p>`, `<br>` (ë‹¨ë½, ì¤„ë°”ê¿ˆ)

#### ì°¨ë‹¨ë˜ëŠ” ìœ„í—˜ ìš”ì†Œ
- `<script>` íƒœê·¸
- `<iframe>` ì„ë² ë“œ
- `onerror`, `onclick` ë“± ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
- `javascript:` í”„ë¡œí† ì½œ
- Base64 ì¸ì½”ë”©ëœ ìŠ¤í¬ë¦½íŠ¸

---

### 2.5 SQL ì¸ì ì…˜ ë°©ì–´

#### ê°œìš”
SQL Injection ê³µê²©ì„ ë°©ì–´í•˜ê¸° ìœ„í•œ ì…ë ¥ ê²€ì¦ ë° íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

#### êµ¬í˜„ íŒŒì¼
- **ë°±ì—”ë“œ**: `server-backend/src/middleware/security.js`
- **ë¼ì´ë¸ŒëŸ¬ë¦¬**: `mongo-sanitize` (npm package)

#### ë°©ì–´ ë©”ì»¤ë‹ˆì¦˜
```javascript
import mongoSanitize from 'mongo-sanitize';

const sqlInjectionProtection = (req, res, next) => {
    const suspiciousPatterns = [
        /(\bOR\b|\bAND\b).*?=.*?/i,
        /UNION.*?SELECT/i,
        /DROP\s+TABLE/i,
        /INSERT\s+INTO/i,
        /--/,
        /\/\*/
    ];

    // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ê²€ì¦
    const queryValues = Object.values(req.query || {}).join(' ');
    const bodyValues = JSON.stringify(req.body || {});

    for (let pattern of suspiciousPatterns) {
        if (pattern.test(queryValues) || pattern.test(bodyValues)) {
            console.warn('âš ï¸ SQL Injection attempt detected:', req.ip);
            return res.status(400).json({
                error: 'Invalid input detected',
                code: 'INVALID_INPUT'
            });
        }
    }

    // MongoDB ì—°ì‚°ì ì œê±°
    if (req.body) {
        req.body = mongoSanitize(req.body);
    }
    if (req.query) {
        req.query = mongoSanitize(req.query);
    }

    next();
};
```

#### íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬ ì‚¬ìš©
```javascript
// âœ… ì•ˆì „í•œ ì¿¼ë¦¬ (íŒŒë¼ë¯¸í„°í™”)
const [rows] = await dbQuery(
    'SELECT * FROM posts WHERE id = ? AND user_id = ?',
    [postId, userId]
);

// âŒ ìœ„í—˜í•œ ì¿¼ë¦¬ (ì‚¬ìš© ê¸ˆì§€)
const query = `SELECT * FROM posts WHERE id = ${postId}`;
```

---

### 2.6 Rate Limiting

#### ê°œìš”
API ì—”ë“œí¬ì¸íŠ¸ë³„ë¡œ ì°¨ë³„í™”ëœ ì†ë„ ì œí•œì„ ì ìš©í•˜ì—¬ DDoS ê³µê²© ë° ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©ì„ ë°©ì–´í•©ë‹ˆë‹¤.

#### êµ¬í˜„ íŒŒì¼
- **ë°±ì—”ë“œ**: `server-backend/src/middleware/security.js`
- **ë¼ì´ë¸ŒëŸ¬ë¦¬**: `express-rate-limit` (npm package)

#### Rate Limiting ì •ì±…
```javascript
// ì¼ë°˜ API ìš”ì²­ (100 req/15ë¶„)
const generalLimiter = rateLimit({
    windowMs: 15 * 60 * 1000,
    max: 100,
    message: 'Too many requests from this IP'
});

// ë¡œê·¸ì¸ ì—”ë“œí¬ì¸íŠ¸ (5 req/15ë¶„)
const authLimiter = rateLimit({
    windowMs: 15 * 60 * 1000,
    max: 5,
    message: 'Too many login attempts'
});

// ê²Œì‹œë¬¼ ì‘ì„± (10 req/10ë¶„)
const postCreationLimiter = rateLimit({
    windowMs: 10 * 60 * 1000,
    max: 10,
    message: 'Too many posts created'
});
```

#### ì—”ë“œí¬ì¸íŠ¸ë³„ ì ìš©
```javascript
// ë¡œê·¸ì¸/íšŒì›ê°€ì…
app.use('/api/auth/login', authLimiter);
app.use('/api/auth/register', authLimiter);

// ê²Œì‹œë¬¼ ì‘ì„±
app.use('/api/posts', postCreationLimiter);

// ê¸°íƒ€ API
app.use('/api/', generalLimiter);
```

#### Rate Limit ì‘ë‹µ
```json
{
    "error": "Too many requests from this IP",
    "retryAfter": 900
}
```

---

### 2.7 CORS ì •ì±…

#### ê°œìš”
Cross-Origin Resource Sharing(CORS) ì •ì±…ì„ í†µí•´ í—ˆìš©ëœ ë„ë©”ì¸ì—ì„œë§Œ API ì ‘ê·¼ì„ í—ˆìš©í•©ë‹ˆë‹¤.

#### êµ¬í˜„ íŒŒì¼
- **ë°±ì—”ë“œ**: `server-backend/api-server/middleware/advancedSecurity.js`
- **ë¼ì´ë¸ŒëŸ¬ë¦¬**: `cors` (npm package)

#### CORS ì„¤ì •
```javascript
const corsOptions = {
    origin: function (origin, callback) {
        const allowedOrigins = [
            'http://localhost:3000',
            'http://localhost:5173',
            'https://your-domain.com'
        ];

        if (!origin || allowedOrigins.indexOf(origin) !== -1) {
            callback(null, true);
        } else {
            callback(new Error('Not allowed by CORS'));
        }
    },
    credentials: true, // ì¿ í‚¤ í¬í•¨ í—ˆìš©
    methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],
    allowedHeaders: ['Content-Type', 'Authorization', 'X-CSRF-Token']
};

app.use(cors(corsOptions));
```

#### Preflight ìš”ì²­ ì²˜ë¦¬
```javascript
app.options('*', cors(corsOptions));
```

---

### 2.8 ë³´ì•ˆ í—¤ë” (Helmet.js)

#### ê°œìš”
Helmet.jsë¥¼ ì‚¬ìš©í•˜ì—¬ HTTP ë³´ì•ˆ í—¤ë”ë¥¼ ì„¤ì •í•˜ê³  ì¼ë°˜ì ì¸ ì›¹ ì·¨ì•½ì ì„ ë°©ì–´í•©ë‹ˆë‹¤.

#### êµ¬í˜„ íŒŒì¼
- **ë°±ì—”ë“œ**: `server-backend/src/middleware/security.js`
- **ë¼ì´ë¸ŒëŸ¬ë¦¬**: `helmet` (npm package)

#### ì„¤ì •ëœ ë³´ì•ˆ í—¤ë”
```javascript
app.use(helmet({
    contentSecurityPolicy: {
        directives: {
            defaultSrc: ["'self'"],
            scriptSrc: ["'self'", "'unsafe-inline'", 'https://apis.google.com'],
            styleSrc: ["'self'", "'unsafe-inline'", 'https://fonts.googleapis.com'],
            imgSrc: ["'self'", 'data:', 'https:'],
            connectSrc: ["'self'", 'https://identitytoolkit.googleapis.com'],
            fontSrc: ["'self'", 'https://fonts.gstatic.com'],
            objectSrc: ["'none'"],
            mediaSrc: ["'self'"],
            frameSrc: ["'none'"]
        }
    },
    hsts: {
        maxAge: 31536000, // 1ë…„
        includeSubDomains: true,
        preload: true
    },
    frameguard: {
        action: 'deny' // Clickjacking ë°©ì–´
    },
    xssFilter: true,
    noSniff: true,
    referrerPolicy: {
        policy: 'strict-origin-when-cross-origin'
    }
}));
```

#### ë³´ì•ˆ íš¨ê³¼
- **CSP**: XSS ê³µê²© ë°©ì–´ (ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì†ŒìŠ¤ë§Œ í—ˆìš©)
- **HSTS**: HTTPS ê°•ì œ ì ìš© (1ë…„)
- **X-Frame-Options**: Clickjacking ê³µê²© ë°©ì–´
- **X-XSS-Protection**: ë¸Œë¼ìš°ì € XSS í•„í„° í™œì„±í™”
- **X-Content-Type-Options**: MIME ìŠ¤ë‹ˆí•‘ ë°©ì–´
- **Referrer-Policy**: Referer ì •ë³´ ì œí•œ

---

### 2.9 ë©”ì‹œì§€ ì•”í˜¸í™”

#### ê°œìš”
ì±„íŒ… ë©”ì‹œì§€ë¥¼ AES-256-CBC ì•”í˜¸í™”í•˜ì—¬ ì„œë²„ ë° ì¤‘ê°„ì ê³µê²©ìœ¼ë¡œë¶€í„° ë©”ì‹œì§€ ë‚´ìš©ì„ ë³´í˜¸í•©ë‹ˆë‹¤.

#### êµ¬í˜„ íŒŒì¼
- **í”„ë¡ íŠ¸ì—”ë“œ**: `frontend/src/utils/MessageEncryption.ts`
- **ë¼ì´ë¸ŒëŸ¬ë¦¬**: `crypto-js` (npm package)

#### ì•”í˜¸í™” ìŠ¤í™
```typescript
// ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜
Algorithm: AES-256-CBC
Key Size: 256 bits
IV Size: 128 bits (16 bytes)
Padding: PKCS7

// ì•”í˜¸í™” í”„ë¡œì„¸ìŠ¤
1. ëœë¤ IV ìƒì„± (16 bytes)
2. ë©”ì‹œì§€ ë°ì´í„° ì§ë ¬í™” (JSON)
3. AES-256-CBC ì•”í˜¸í™”
4. Base64 ì¸ì½”ë”© (ì „ì†¡ìš©)
```

#### ì•”í˜¸í™”/ë³µí˜¸í™” ì˜ˆì‹œ
```typescript
class MessageEncryption {
    static encryptMessage(content: string, roomKey: string): EncryptedMessage {
        const iv = CryptoJS.lib.WordArray.random(16);
        const messageData = JSON.stringify({
            content,
            timestamp: Date.now(),
            messageId: generateId()
        });

        const encrypted = CryptoJS.AES.encrypt(messageData, roomKey, {
            iv: iv,
            mode: CryptoJS.mode.CBC,
            padding: CryptoJS.pad.Pkcs7
        });

        return {
            encryptedContent: encrypted.toString(),
            iv: iv.toString(CryptoJS.enc.Base64),
            timestamp: Date.now()
        };
    }

    static decryptMessage(encrypted: EncryptedMessage, roomKey: string): string {
        const iv = CryptoJS.enc.Base64.parse(encrypted.iv);
        const decrypted = CryptoJS.AES.decrypt(encrypted.encryptedContent, roomKey, {
            iv: iv,
            mode: CryptoJS.mode.CBC,
            padding: CryptoJS.pad.Pkcs7
        });

        const decryptedString = decrypted.toString(CryptoJS.enc.Utf8);
        const messageData = JSON.parse(decryptedString);
        return messageData.content;
    }
}
```

#### âš ï¸ ë³´ì•ˆ ê°œì„  í•„ìš” ì‚¬í•­
**ë©”ì‹œì§€ ì•”í˜¸í™” ê°•í™” (AES-GCM ì „í™˜)**
- í˜„ì¬ CBC ëª¨ë“œëŠ” ë©”ì‹œì§€ ì¸ì¦ ë¯¸ì œê³µ
- GCM ëª¨ë“œë¡œ ì „í™˜í•˜ì—¬ ë³€ì¡° íƒì§€ ê¸°ëŠ¥ ì¶”ê°€ í•„ìš”

ìì„¸í•œ ë‚´ìš©: [SECURITY_URGENT_IMPROVEMENTS.md](./SECURITY_URGENT_IMPROVEMENTS.md)

---

### 2.10 ê³„ì • ì ê¸ˆ ì‹œìŠ¤í…œ

#### ê°œìš”
ë°˜ë³µì ì¸ ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ê³„ì •ì„ ì¼ì‹œì ìœ¼ë¡œ ì ê¸ˆí•˜ì—¬ ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©ì„ ë°©ì–´í•©ë‹ˆë‹¤.

#### êµ¬í˜„ íŒŒì¼
- **ë°±ì—”ë“œ**: `server-backend/src/middleware/security.js`
- **ë°ì´í„°ë² ì´ìŠ¤**: `users` í…Œì´ë¸” (`failed_login_attempts`, `account_locked_until`)

#### ì ê¸ˆ ì •ì±…
```javascript
// 5íšŒ ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ 15ë¶„ ì ê¸ˆ
const MAX_FAILED_ATTEMPTS = 5;
const LOCK_DURATION = 15 * 60 * 1000; // 15ë¶„

// ë¡œê·¸ì¸ ì‹¤íŒ¨ ì²˜ë¦¬
async function handleFailedLogin(userId) {
    const user = await getUserById(userId);
    user.failed_login_attempts += 1;

    if (user.failed_login_attempts >= MAX_FAILED_ATTEMPTS) {
        user.account_locked_until = new Date(Date.now() + LOCK_DURATION);
        console.warn(`âš ï¸ Account locked: ${userId}`);
    }

    await updateUser(user);
}

// ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì´ˆê¸°í™”
async function handleSuccessfulLogin(userId) {
    await dbQuery(
        'UPDATE users SET failed_login_attempts = 0, account_locked_until = NULL WHERE id = ?',
        [userId]
    );
}
```

#### ê³„ì • ì ê¸ˆ í™•ì¸
```javascript
function isAccountLocked(user) {
    if (!user.account_locked_until) return false;
    
    const now = new Date();
    if (now < user.account_locked_until) {
        const remainingMinutes = Math.ceil((user.account_locked_until - now) / 60000);
        return {
            locked: true,
            remainingMinutes
        };
    }
    
    return { locked: false };
}
```

---

## 3. ê²Œì‹œíŒ ë° ì½˜í…ì¸ 